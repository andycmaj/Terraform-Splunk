{
    "version": 3,
    "terraform_version": "0.7.13",
    "serial": 6,
    "lineage": "26d147a8-f302-42df-bd63-3e49f8b08113",
    "modules": [
        {
            "path": [
                "root"
            ],
            "outputs": {},
            "resources": {
                "aws_elb.search": {
                    "type": "aws_elb",
                    "depends_on": [
                        "aws_instance.searchhead",
                        "aws_security_group.elb",
                        "module.stack"
                    ],
                    "primary": {
                        "id": "splunk-elb",
                        "attributes": {
                            "access_logs.#": "0",
                            "availability_zones.#": "3",
                            "availability_zones.2050015877": "us-west-2c",
                            "availability_zones.221770259": "us-west-2b",
                            "availability_zones.2487133097": "us-west-2a",
                            "connection_draining": "true",
                            "connection_draining_timeout": "400",
                            "cross_zone_load_balancing": "true",
                            "dns_name": "splunk-elb-893438586.us-west-2.elb.amazonaws.com",
                            "health_check.#": "1",
                            "health_check.0.healthy_threshold": "2",
                            "health_check.0.interval": "5",
                            "health_check.0.target": "HTTP:8000/en-US/account/login",
                            "health_check.0.timeout": "3",
                            "health_check.0.unhealthy_threshold": "2",
                            "id": "splunk-elb",
                            "idle_timeout": "400",
                            "instances.#": "2",
                            "instances.1926692105": "i-68ff99fd",
                            "instances.424969517": "i-fe08766a",
                            "internal": "false",
                            "listener.#": "1",
                            "listener.206423021.instance_port": "8000",
                            "listener.206423021.instance_protocol": "http",
                            "listener.206423021.lb_port": "80",
                            "listener.206423021.lb_protocol": "http",
                            "listener.206423021.ssl_certificate_id": "",
                            "name": "splunk-elb",
                            "security_groups.#": "1",
                            "security_groups.273712569": "sg-5c8c9925",
                            "source_security_group": "069884434102/sg_splunk_elb",
                            "source_security_group_id": "sg-5c8c9925",
                            "subnets.#": "3",
                            "subnets.358836390": "subnet-0a703752",
                            "subnets.3733971079": "subnet-495da12e",
                            "subnets.613585001": "subnet-adc4d2db",
                            "tags.%": "1",
                            "tags.Name": "splunk_elb",
                            "zone_id": "Z1H1FL5HABSF5"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": ""
                },
                "aws_instance.deploymentserver": {
                    "type": "aws_instance",
                    "depends_on": [
                        "aws_security_group.all",
                        "module.stack",
                        "template_file.consul_agent_install",
                        "template_file.user_data_deploymentserver"
                    ],
                    "primary": {
                        "id": "i-bd0a7429",
                        "attributes": {
                            "ami": "ami-def75dbe",
                            "associate_public_ip_address": "true",
                            "availability_zone": "us-west-2a",
                            "disable_api_termination": "false",
                            "ebs_block_device.#": "0",
                            "ebs_optimized": "false",
                            "ephemeral_block_device.#": "0",
                            "iam_instance_profile": "",
                            "id": "i-bd0a7429",
                            "instance_state": "running",
                            "instance_type": "t2.micro",
                            "key_name": "dev_key",
                            "monitoring": "false",
                            "network_interface_id": "eni-91a083d1",
                            "private_dns": "ip-10-30-32-200.us-west-2.compute.internal",
                            "private_ip": "10.30.32.200",
                            "public_dns": "ec2-35-165-192-70.us-west-2.compute.amazonaws.com",
                            "public_ip": "35.165.192.70",
                            "root_block_device.#": "1",
                            "root_block_device.0.delete_on_termination": "true",
                            "root_block_device.0.iops": "0",
                            "root_block_device.0.volume_size": "1000",
                            "root_block_device.0.volume_type": "standard",
                            "security_groups.#": "0",
                            "source_dest_check": "true",
                            "subnet_id": "subnet-adc4d2db",
                            "tags.%": "1",
                            "tags.Name": "splunk_deploymentserver",
                            "tenancy": "default",
                            "user_data": "0a235b022aa46a3a3bb06fb2dd101e8362817173",
                            "vpc_security_group_ids.#": "1",
                            "vpc_security_group_ids.1627235309": "sg-528c992b"
                        },
                        "meta": {
                            "schema_version": "1"
                        },
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": ""
                },
                "aws_instance.indexer.0": {
                    "type": "aws_instance",
                    "depends_on": [
                        "aws_security_group.all",
                        "module.stack",
                        "template_file.consul_agent_install",
                        "template_file.user_data_indexer"
                    ],
                    "primary": {
                        "id": "i-f20b7566",
                        "attributes": {
                            "ami": "ami-def75dbe",
                            "associate_public_ip_address": "true",
                            "availability_zone": "us-west-2a",
                            "disable_api_termination": "false",
                            "ebs_block_device.#": "0",
                            "ebs_optimized": "false",
                            "ephemeral_block_device.#": "0",
                            "iam_instance_profile": "",
                            "id": "i-f20b7566",
                            "instance_state": "running",
                            "instance_type": "t2.micro",
                            "key_name": "dev_key",
                            "monitoring": "false",
                            "network_interface_id": "eni-53ae8d13",
                            "private_dns": "ip-10-30-33-179.us-west-2.compute.internal",
                            "private_ip": "10.30.33.179",
                            "public_dns": "ec2-35-165-233-154.us-west-2.compute.amazonaws.com",
                            "public_ip": "35.165.233.154",
                            "root_block_device.#": "1",
                            "root_block_device.0.delete_on_termination": "true",
                            "root_block_device.0.iops": "0",
                            "root_block_device.0.volume_size": "1000",
                            "root_block_device.0.volume_type": "standard",
                            "security_groups.#": "0",
                            "source_dest_check": "true",
                            "subnet_id": "subnet-adc4d2db",
                            "tags.%": "1",
                            "tags.Name": "splunk_indexer",
                            "tenancy": "default",
                            "user_data": "f8d2346ed63bc9bd8d7ced7770fce5b3b4e7708a",
                            "vpc_security_group_ids.#": "1",
                            "vpc_security_group_ids.1627235309": "sg-528c992b"
                        },
                        "meta": {
                            "schema_version": "1"
                        },
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": ""
                },
                "aws_instance.indexer.1": {
                    "type": "aws_instance",
                    "depends_on": [
                        "aws_security_group.all",
                        "module.stack",
                        "template_file.consul_agent_install",
                        "template_file.user_data_indexer"
                    ],
                    "primary": {
                        "id": "i-daff994f",
                        "attributes": {
                            "ami": "ami-def75dbe",
                            "associate_public_ip_address": "true",
                            "availability_zone": "us-west-2b",
                            "disable_api_termination": "false",
                            "ebs_block_device.#": "0",
                            "ebs_optimized": "false",
                            "ephemeral_block_device.#": "0",
                            "iam_instance_profile": "",
                            "id": "i-daff994f",
                            "instance_state": "running",
                            "instance_type": "t2.micro",
                            "key_name": "dev_key",
                            "monitoring": "false",
                            "network_interface_id": "eni-1b7ece6a",
                            "private_dns": "ip-10-30-103-244.us-west-2.compute.internal",
                            "private_ip": "10.30.103.244",
                            "public_dns": "ec2-35-165-93-93.us-west-2.compute.amazonaws.com",
                            "public_ip": "35.165.93.93",
                            "root_block_device.#": "1",
                            "root_block_device.0.delete_on_termination": "true",
                            "root_block_device.0.iops": "0",
                            "root_block_device.0.volume_size": "1000",
                            "root_block_device.0.volume_type": "standard",
                            "security_groups.#": "0",
                            "source_dest_check": "true",
                            "subnet_id": "subnet-495da12e",
                            "tags.%": "1",
                            "tags.Name": "splunk_indexer",
                            "tenancy": "default",
                            "user_data": "f8d2346ed63bc9bd8d7ced7770fce5b3b4e7708a",
                            "vpc_security_group_ids.#": "1",
                            "vpc_security_group_ids.1627235309": "sg-528c992b"
                        },
                        "meta": {
                            "schema_version": "1"
                        },
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": ""
                },
                "aws_instance.master": {
                    "type": "aws_instance",
                    "depends_on": [
                        "aws_security_group.all",
                        "module.stack",
                        "template_file.consul_agent_install",
                        "template_file.user_data_master"
                    ],
                    "primary": {
                        "id": "i-aa0a743e",
                        "attributes": {
                            "ami": "ami-def75dbe",
                            "associate_public_ip_address": "true",
                            "availability_zone": "us-west-2a",
                            "disable_api_termination": "false",
                            "ebs_block_device.#": "0",
                            "ebs_optimized": "false",
                            "ephemeral_block_device.#": "0",
                            "iam_instance_profile": "",
                            "id": "i-aa0a743e",
                            "instance_state": "running",
                            "instance_type": "t2.micro",
                            "key_name": "dev_key",
                            "monitoring": "false",
                            "network_interface_id": "eni-b2a487f2",
                            "private_dns": "ip-10-30-45-234.us-west-2.compute.internal",
                            "private_ip": "10.30.45.234",
                            "public_dns": "ec2-35-165-243-22.us-west-2.compute.amazonaws.com",
                            "public_ip": "35.165.243.22",
                            "root_block_device.#": "1",
                            "root_block_device.0.delete_on_termination": "true",
                            "root_block_device.0.iops": "0",
                            "root_block_device.0.volume_size": "1000",
                            "root_block_device.0.volume_type": "standard",
                            "security_groups.#": "0",
                            "source_dest_check": "true",
                            "subnet_id": "subnet-adc4d2db",
                            "tags.%": "1",
                            "tags.Name": "splunk_master",
                            "tenancy": "default",
                            "user_data": "d63e851e9085afee9b62da3333ef20ecd55ad82b",
                            "vpc_security_group_ids.#": "1",
                            "vpc_security_group_ids.1627235309": "sg-528c992b"
                        },
                        "meta": {
                            "schema_version": "1"
                        },
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": ""
                },
                "aws_instance.searchhead.0": {
                    "type": "aws_instance",
                    "depends_on": [
                        "aws_security_group.all",
                        "module.stack",
                        "template_file.consul_agent_install",
                        "template_file.user_data_searchhead"
                    ],
                    "primary": {
                        "id": "i-fe08766a",
                        "attributes": {
                            "ami": "ami-def75dbe",
                            "associate_public_ip_address": "true",
                            "availability_zone": "us-west-2a",
                            "disable_api_termination": "false",
                            "ebs_block_device.#": "0",
                            "ebs_optimized": "false",
                            "ephemeral_block_device.#": "0",
                            "iam_instance_profile": "",
                            "id": "i-fe08766a",
                            "instance_state": "running",
                            "instance_type": "t2.micro",
                            "key_name": "dev_key",
                            "monitoring": "false",
                            "network_interface_id": "eni-47b39007",
                            "private_dns": "ip-10-30-38-235.us-west-2.compute.internal",
                            "private_ip": "10.30.38.235",
                            "public_dns": "ec2-35-165-242-150.us-west-2.compute.amazonaws.com",
                            "public_ip": "35.165.242.150",
                            "root_block_device.#": "1",
                            "root_block_device.0.delete_on_termination": "true",
                            "root_block_device.0.iops": "0",
                            "root_block_device.0.volume_size": "1000",
                            "root_block_device.0.volume_type": "standard",
                            "security_groups.#": "0",
                            "source_dest_check": "true",
                            "subnet_id": "subnet-adc4d2db",
                            "tags.%": "1",
                            "tags.Name": "splunk_searchhead",
                            "tenancy": "default",
                            "user_data": "023c2502663a1637e9f6982f8e121ecd93e6fb7a",
                            "vpc_security_group_ids.#": "1",
                            "vpc_security_group_ids.1627235309": "sg-528c992b"
                        },
                        "meta": {
                            "schema_version": "1"
                        },
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": ""
                },
                "aws_instance.searchhead.1": {
                    "type": "aws_instance",
                    "depends_on": [
                        "aws_security_group.all",
                        "module.stack",
                        "template_file.consul_agent_install",
                        "template_file.user_data_searchhead"
                    ],
                    "primary": {
                        "id": "i-68ff99fd",
                        "attributes": {
                            "ami": "ami-def75dbe",
                            "associate_public_ip_address": "true",
                            "availability_zone": "us-west-2b",
                            "disable_api_termination": "false",
                            "ebs_block_device.#": "0",
                            "ebs_optimized": "false",
                            "ephemeral_block_device.#": "0",
                            "iam_instance_profile": "",
                            "id": "i-68ff99fd",
                            "instance_state": "running",
                            "instance_type": "t2.micro",
                            "key_name": "dev_key",
                            "monitoring": "false",
                            "network_interface_id": "eni-407fcf31",
                            "private_dns": "ip-10-30-105-70.us-west-2.compute.internal",
                            "private_ip": "10.30.105.70",
                            "public_dns": "ec2-35-162-218-205.us-west-2.compute.amazonaws.com",
                            "public_ip": "35.162.218.205",
                            "root_block_device.#": "1",
                            "root_block_device.0.delete_on_termination": "true",
                            "root_block_device.0.iops": "0",
                            "root_block_device.0.volume_size": "1000",
                            "root_block_device.0.volume_type": "standard",
                            "security_groups.#": "0",
                            "source_dest_check": "true",
                            "subnet_id": "subnet-495da12e",
                            "tags.%": "1",
                            "tags.Name": "splunk_searchhead",
                            "tenancy": "default",
                            "user_data": "023c2502663a1637e9f6982f8e121ecd93e6fb7a",
                            "vpc_security_group_ids.#": "1",
                            "vpc_security_group_ids.1627235309": "sg-528c992b"
                        },
                        "meta": {
                            "schema_version": "1"
                        },
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": ""
                },
                "aws_lb_cookie_stickiness_policy.search": {
                    "type": "aws_lb_cookie_stickiness_policy",
                    "depends_on": [
                        "aws_elb.search"
                    ],
                    "primary": {
                        "id": "splunk-elb:80:splunk-lb-policy",
                        "attributes": {
                            "cookie_expiration_period": "1800",
                            "id": "splunk-elb:80:splunk-lb-policy",
                            "lb_port": "80",
                            "load_balancer": "splunk-elb",
                            "name": "splunk-lb-policy"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": ""
                },
                "aws_security_group.all": {
                    "type": "aws_security_group",
                    "depends_on": [
                        "module.stack"
                    ],
                    "primary": {
                        "id": "sg-528c992b",
                        "attributes": {
                            "description": "Common rules for all",
                            "egress.#": "1",
                            "egress.482069346.cidr_blocks.#": "1",
                            "egress.482069346.cidr_blocks.0": "0.0.0.0/0",
                            "egress.482069346.from_port": "0",
                            "egress.482069346.prefix_list_ids.#": "0",
                            "egress.482069346.protocol": "-1",
                            "egress.482069346.security_groups.#": "0",
                            "egress.482069346.self": "false",
                            "egress.482069346.to_port": "0",
                            "id": "sg-528c992b",
                            "ingress.#": "3",
                            "ingress.2541437006.cidr_blocks.#": "1",
                            "ingress.2541437006.cidr_blocks.0": "0.0.0.0/0",
                            "ingress.2541437006.from_port": "22",
                            "ingress.2541437006.protocol": "tcp",
                            "ingress.2541437006.security_groups.#": "0",
                            "ingress.2541437006.self": "false",
                            "ingress.2541437006.to_port": "22",
                            "ingress.332570261.cidr_blocks.#": "1",
                            "ingress.332570261.cidr_blocks.0": "0.0.0.0/0",
                            "ingress.332570261.from_port": "8000",
                            "ingress.332570261.protocol": "tcp",
                            "ingress.332570261.security_groups.#": "0",
                            "ingress.332570261.self": "false",
                            "ingress.332570261.to_port": "8000",
                            "ingress.753360330.cidr_blocks.#": "0",
                            "ingress.753360330.from_port": "0",
                            "ingress.753360330.protocol": "-1",
                            "ingress.753360330.security_groups.#": "0",
                            "ingress.753360330.self": "true",
                            "ingress.753360330.to_port": "0",
                            "name": "sg_splunk_all",
                            "owner_id": "069884434102",
                            "tags.%": "0",
                            "vpc_id": "vpc-28825e4f"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": ""
                },
                "aws_security_group.elb": {
                    "type": "aws_security_group",
                    "depends_on": [
                        "module.stack"
                    ],
                    "primary": {
                        "id": "sg-5c8c9925",
                        "attributes": {
                            "description": "Used in the terraform",
                            "egress.#": "1",
                            "egress.482069346.cidr_blocks.#": "1",
                            "egress.482069346.cidr_blocks.0": "0.0.0.0/0",
                            "egress.482069346.from_port": "0",
                            "egress.482069346.prefix_list_ids.#": "0",
                            "egress.482069346.protocol": "-1",
                            "egress.482069346.security_groups.#": "0",
                            "egress.482069346.self": "false",
                            "egress.482069346.to_port": "0",
                            "id": "sg-5c8c9925",
                            "ingress.#": "2",
                            "ingress.2214680975.cidr_blocks.#": "1",
                            "ingress.2214680975.cidr_blocks.0": "0.0.0.0/0",
                            "ingress.2214680975.from_port": "80",
                            "ingress.2214680975.protocol": "tcp",
                            "ingress.2214680975.security_groups.#": "0",
                            "ingress.2214680975.self": "false",
                            "ingress.2214680975.to_port": "80",
                            "ingress.2617001939.cidr_blocks.#": "1",
                            "ingress.2617001939.cidr_blocks.0": "0.0.0.0/0",
                            "ingress.2617001939.from_port": "443",
                            "ingress.2617001939.protocol": "tcp",
                            "ingress.2617001939.security_groups.#": "0",
                            "ingress.2617001939.self": "false",
                            "ingress.2617001939.to_port": "443",
                            "name": "sg_splunk_elb",
                            "owner_id": "069884434102",
                            "tags.%": "0",
                            "vpc_id": "vpc-28825e4f"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": ""
                },
                "aws_security_group.searchhead": {
                    "type": "aws_security_group",
                    "depends_on": [
                        "aws_security_group.elb",
                        "module.stack"
                    ],
                    "primary": {
                        "id": "sg-578c992e",
                        "attributes": {
                            "description": "Used in the  terraform",
                            "egress.#": "0",
                            "id": "sg-578c992e",
                            "ingress.#": "1",
                            "ingress.2078549249.cidr_blocks.#": "0",
                            "ingress.2078549249.from_port": "8000",
                            "ingress.2078549249.protocol": "tcp",
                            "ingress.2078549249.security_groups.#": "1",
                            "ingress.2078549249.security_groups.273712569": "sg-5c8c9925",
                            "ingress.2078549249.self": "false",
                            "ingress.2078549249.to_port": "8000",
                            "name": "sg_splunk_searchhead",
                            "owner_id": "069884434102",
                            "tags.%": "0",
                            "vpc_id": "vpc-28825e4f"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": ""
                },
                "aws_security_group_rule.interco": {
                    "type": "aws_security_group_rule",
                    "depends_on": [
                        "aws_security_group.all"
                    ],
                    "primary": {
                        "id": "sgrule-2004941426",
                        "attributes": {
                            "cidr_blocks.#": "0",
                            "from_port": "0",
                            "id": "sgrule-2004941426",
                            "prefix_list_ids.#": "0",
                            "protocol": "-1",
                            "security_group_id": "sg-528c992b",
                            "self": "false",
                            "source_security_group_id": "sg-528c992b",
                            "to_port": "0",
                            "type": "ingress"
                        },
                        "meta": {
                            "schema_version": "2"
                        },
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": ""
                },
                "consul_service.deploymentserver": {
                    "type": "consul_service",
                    "depends_on": [
                        "aws_instance.deploymentserver"
                    ],
                    "primary": {
                        "id": "deployment-server",
                        "attributes": {
                            "address": "10.30.32.200",
                            "id": "deployment-server",
                            "name": "deployment-server",
                            "port": "8089",
                            "service_id": "deployment-server",
                            "tags.#": "0"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": ""
                },
                "consul_service.indexer.0": {
                    "type": "consul_service",
                    "depends_on": [
                        "aws_instance.indexer"
                    ],
                    "primary": {
                        "id": "indexer-0",
                        "attributes": {
                            "address": "10.30.33.179",
                            "id": "indexer-0",
                            "name": "indexer-0",
                            "port": "8089",
                            "service_id": "indexer-0",
                            "tags.#": "0"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": ""
                },
                "consul_service.indexer.1": {
                    "type": "consul_service",
                    "depends_on": [
                        "aws_instance.indexer"
                    ],
                    "primary": {
                        "id": "indexer-1",
                        "attributes": {
                            "address": "10.30.103.244",
                            "id": "indexer-1",
                            "name": "indexer-1",
                            "port": "8089",
                            "service_id": "indexer-1",
                            "tags.#": "0"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": ""
                },
                "consul_service.master": {
                    "type": "consul_service",
                    "depends_on": [
                        "aws_instance.master"
                    ],
                    "primary": {
                        "id": "cluster-master",
                        "attributes": {
                            "address": "10.30.45.234",
                            "id": "cluster-master",
                            "name": "cluster-master",
                            "port": "8089",
                            "service_id": "cluster-master",
                            "tags.#": "0"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": ""
                },
                "consul_service.searchhead.0": {
                    "type": "consul_service",
                    "depends_on": [
                        "aws_instance.searchhead"
                    ],
                    "primary": {
                        "id": "searchhead-0",
                        "attributes": {
                            "address": "10.30.38.235",
                            "id": "searchhead-0",
                            "name": "searchhead-0",
                            "port": "8089",
                            "service_id": "searchhead-0",
                            "tags.#": "0"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": ""
                },
                "consul_service.searchhead.1": {
                    "type": "consul_service",
                    "depends_on": [
                        "aws_instance.searchhead"
                    ],
                    "primary": {
                        "id": "searchhead-1",
                        "attributes": {
                            "address": "10.30.105.70",
                            "id": "searchhead-1",
                            "name": "searchhead-1",
                            "port": "8089",
                            "service_id": "searchhead-1",
                            "tags.#": "0"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": ""
                },
                "template_file.consul_agent_install": {
                    "type": "template_file",
                    "depends_on": [
                        "module.consul"
                    ],
                    "primary": {
                        "id": "cfbb6b704081cf600b5bde60bb195aef29fa2e55db89799d12016ee959eaf68b",
                        "attributes": {
                            "id": "cfbb6b704081cf600b5bde60bb195aef29fa2e55db89799d12016ee959eaf68b",
                            "rendered": "#!/usr/bin/env bash\nset -e\n\necho \"Installing dependencies...\"\nif [ -x \"$(command -v apt-get)\" ]; then\n  sudo apt-get update -y\n  sudo apt-get install -y unzip\nelse\n  sudo yum update -y\n  sudo yum install -y unzip wget\nfi\n\n\necho \"Fetching Consul...\"\nCONSUL=0.7.1\ncd /tmp\nwget https://releases.hashicorp.com/consul/${CONSUL}/consul_${CONSUL}_linux_amd64.zip -O consul.zip\n\necho \"Installing Consul...\"\nunzip consul.zip \u003e/dev/null\nchmod +x consul\nsudo mv consul /usr/local/bin/consul\nsudo mkdir -p /opt/consul/data\n\n# Read from the file we created\nSERVER_COUNT=$(cat /tmp/consul-server-count | tr -d '\\n')\nCONSUL_JOIN=$(cat /tmp/consul-server-addr | tr -d '\\n')\n\n# Write the flags to a temporary file\ncat \u003e/tmp/consul_flags \u003c\u003c EOF\nCONSUL_FLAGS=\"-advertise ${INSTANCE_IP} -retry-join=ec2-35-165-118-234.us-west-2.compute.amazonaws.com -data-dir=/opt/consul/data -client 0.0.0.0\"\nEOF\n\nif [ -f /tmp/upstart.conf ];\nthen\n  echo \"Installing Upstart service...\"\n  sudo mkdir -p /etc/consul.d\n  sudo mkdir -p /etc/service\n  sudo chown root:root /tmp/upstart.conf\n  sudo mv /tmp/upstart.conf /etc/init/consul.conf\n  sudo chmod 0644 /etc/init/consul.conf\n  sudo mv /tmp/consul_flags /etc/service/consul\n  sudo chmod 0644 /etc/service/consul\nelse\n  echo \"Installing Systemd service...\"\n  sudo mkdir -p /etc/systemd/system/consul.d\n  sudo chown root:root /tmp/consul.service\n  sudo mv /tmp/consul.service /etc/systemd/system/consul.service\n  sudo chmod 0644 /etc/systemd/system/consul.service\n  sudo mv /tmp/consul_flags /etc/sysconfig/consul\n  sudo chown root:root /etc/sysconfig/consul\n  sudo chmod 0644 /etc/sysconfig/consul\nfi\n",
                            "template": "/Workspaces/Terraform-Splunk/consul/scripts/install.tpl",
                            "vars.%": "1",
                            "vars.consul_params": "-advertise ${INSTANCE_IP} -retry-join=ec2-35-165-118-234.us-west-2.compute.amazonaws.com -data-dir=/opt/consul/data -client 0.0.0.0"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": ""
                },
                "template_file.deploymentclient_conf": {
                    "type": "template_file",
                    "depends_on": [],
                    "primary": {
                        "id": "6fa3b9e0ecc2cb2b6d8cff27638d0a8a5e079a6302517d32089ab31c40cc29b4",
                        "attributes": {
                            "id": "6fa3b9e0ecc2cb2b6d8cff27638d0a8a5e079a6302517d32089ab31c40cc29b4",
                            "rendered": "[target-broker:deploymentServer]\ntargetUri = deployment-server:8089\n",
                            "template": "[target-broker:deploymentServer]\ntargetUri = deployment-server:${mgmtHostPort}\n",
                            "vars.%": "2",
                            "vars.deploymentserver_ip": "10.30.32.200",
                            "vars.mgmtHostPort": "8089"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": ""
                },
                "template_file.server_conf_indexer": {
                    "type": "template_file",
                    "depends_on": [
                        "aws_instance.master"
                    ],
                    "primary": {
                        "id": "b9c1701e1fb21c932db41ccd2186e84c54f38ed605d3b723b2c7969f5041ed33",
                        "attributes": {
                            "id": "b9c1701e1fb21c932db41ccd2186e84c54f38ed605d3b723b2c7969f5041ed33",
                            "rendered": "[replication_port://9887]\n\n[clustering]\nmode = slave\nmaster_uri = https://10.30.45.234:8089\npass4SymmKey = BitchBetterHaveMyMoney\n",
                            "template": "[replication_port://${replication_port}]\n\n[clustering]\nmode = slave\nmaster_uri = https://${master_ip}:${mgmtHostPort}\npass4SymmKey = ${pass4SymmKey}\n",
                            "vars.%": "4",
                            "vars.master_ip": "10.30.45.234",
                            "vars.mgmtHostPort": "8089",
                            "vars.pass4SymmKey": "BitchBetterHaveMyMoney",
                            "vars.replication_port": "9887"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": ""
                },
                "template_file.server_conf_master": {
                    "type": "template_file",
                    "depends_on": [],
                    "primary": {
                        "id": "8a5bd21b16d591542e300b9f683eb40693c37afae758389006fdd6b54032d928",
                        "attributes": {
                            "id": "8a5bd21b16d591542e300b9f683eb40693c37afae758389006fdd6b54032d928",
                            "rendered": "[clustering]\nmode = master\nreplication_factor = 2\nsearch_factor = 2\npass4SymmKey = BitchBetterHaveMyMoney\n\n[shclustering]\nid = 776D2949-B2DA-405E-96B3-B6688C87AB7D\npass4SymmKey = BitchBetterHaveMyMoney\nshcluster_label = shcluster\n",
                            "template": "[clustering]\nmode = master\nreplication_factor = ${replication_factor}\nsearch_factor = ${search_factor}\npass4SymmKey = ${pass4SymmKey}\n\n[shclustering]\nid = 776D2949-B2DA-405E-96B3-B6688C87AB7D\npass4SymmKey = ${pass4SymmKey}\nshcluster_label = shcluster\n",
                            "vars.%": "3",
                            "vars.pass4SymmKey": "BitchBetterHaveMyMoney",
                            "vars.replication_factor": "2",
                            "vars.search_factor": "2"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": ""
                },
                "template_file.server_conf_searchhead": {
                    "type": "template_file",
                    "depends_on": [
                        "aws_instance.master"
                    ],
                    "primary": {
                        "id": "d2a557dd9e2b8797d3ed1dd1eb0ea729d7c45b3e5082306de5b4c599a4df8296",
                        "attributes": {
                            "id": "d2a557dd9e2b8797d3ed1dd1eb0ea729d7c45b3e5082306de5b4c599a4df8296",
                            "rendered": "[general]\nallowRemoteLogin = always\n\n[clustering]\nmode = searchhead\nmaster_uri = https://cluster-master:8089\npass4SymmKey = BitchBetterHaveMyMoney\n\n[replication_port://9887]\n\n[shclustering]\nid = 776D2949-B2DA-405E-96B3-B6688C87AB7D\nconf_deploy_fetch_url = https://cluster-master:8089\ndisabled = false\nelection_timeout_ms = 10000\nmgmt_uri = https://LOCAL_IP:8089\npass4SymmKey = BitchBetterHaveMyMoney\nreplication_factor = 2\nshcluster_label = shcluster\n",
                            "template": "[general]\nallowRemoteLogin = always\n\n[clustering]\nmode = searchhead\nmaster_uri = https://cluster-master:${mgmtHostPort}\npass4SymmKey = ${pass4SymmKey}\n\n[replication_port://${replication_port}]\n\n[shclustering]\nid = 776D2949-B2DA-405E-96B3-B6688C87AB7D\nconf_deploy_fetch_url = https://cluster-master:${mgmtHostPort}\ndisabled = false\nelection_timeout_ms = 10000\nmgmt_uri = https://LOCAL_IP:8089\npass4SymmKey = ${pass4SymmKey}\nreplication_factor = 2\nshcluster_label = shcluster\n",
                            "vars.%": "4",
                            "vars.master_ip": "10.30.45.234",
                            "vars.mgmtHostPort": "8089",
                            "vars.pass4SymmKey": "BitchBetterHaveMyMoney",
                            "vars.replication_port": "9887"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": ""
                },
                "template_file.serverclass_conf": {
                    "type": "template_file",
                    "depends_on": [
                        "aws_instance.master"
                    ],
                    "primary": {
                        "id": "7502bf08a0d2e165c5391406cf84a8d658f5feb0622fbc42c37bec8448b4a658",
                        "attributes": {
                            "id": "7502bf08a0d2e165c5391406cf84a8d658f5feb0622fbc42c37bec8448b4a658",
                            "rendered": "[serverClass:sc_master]\nstateOnClient = \"noop\"\nwhitelist.0 = cluster-master\n\n[serverClass:sc_searchhead]\nwhitelist.0 = *\nblacklist.0 = cluster-master\n",
                            "template": "[serverClass:sc_master]\nstateOnClient = \"noop\"\nwhitelist.0 = cluster-master\n\n[serverClass:sc_searchhead]\nwhitelist.0 = *\nblacklist.0 = cluster-master\n",
                            "vars.%": "1",
                            "vars.master_ip": "10.30.45.234"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": ""
                },
                "template_file.user_data_deploymentserver": {
                    "type": "template_file",
                    "depends_on": [
                        "template_file.serverclass_conf",
                        "template_file.web_conf"
                    ],
                    "primary": {
                        "id": "2e33bbf202afc1270b8c75ca45bdc28356dabe2eb984f7c08ccd6db408fd201e",
                        "attributes": {
                            "id": "2e33bbf202afc1270b8c75ca45bdc28356dabe2eb984f7c08ccd6db408fd201e",
                            "rendered": "#!/bin/bash\nset -x\nexec 1\u003e /var/tmp/mylog 2\u003e\u00261\n\n\n\nINSTANCE_IP=\"$(curl http://169.254.169.254/latest/meta-data/local-ipv4)\"\n\n# Create local config files\nsudo -u splunk mkdir -p /opt/splunk/etc/system/local\n\ncat \u003c\u003cEOF | sudo -u splunk tee /opt/splunk/etc/system/local/deploymentclient.conf\n\nEOF\n\ncat \u003c\u003cEOF | sudo -u splunk tee /opt/splunk/etc/system/local/web.conf\n[settings]\nhttpport        = 8000\nmgmtHostPort    = 127.0.0.1:8089\n\nEOF\n\ncat \u003c\u003cEOF | sudo -u splunk tee /opt/splunk/etc/system/local/server.conf\n\nEOF\nsed -i 's/LOCAL_IP/'${INSTANCE_IP}'/' /opt/splunk/etc/system/local/server.conf\n\ncat \u003c\u003cEOF | sudo -u splunk tee /opt/splunk/etc/system/local/serverclass.conf\n[serverClass:sc_master]\nstateOnClient = \"noop\"\nwhitelist.0 = cluster-master\n\n[serverClass:sc_searchhead]\nwhitelist.0 = *\nblacklist.0 = cluster-master\n\nEOF\n\n# Update hostname\nhostname splunk-deploymentserver-`hostname`\necho `hostname` \u003e /etc/hostname\nsed -i 's/localhost$/localhost '`hostname`'/' /etc/hosts\n\n\n# Start service and Enable autostart\nsudo -u splunk /opt/splunk/bin/splunk enable boot-start -user splunk --accept-license\n\nexport SPLUNK_START_ARGS=--accept-license --answer-yes --no-prompt\n\n\n# sudo -u splunk /opt/splunk/bin/splunk start --accept-license\nsudo -u splunk /opt/splunk/bin/entrypoint.sh start-service\n",
                            "template": "#!/bin/bash\nset -x\nexec 1\u003e /var/tmp/mylog 2\u003e\u00261\n\n\n\nINSTANCE_IP=\"$(curl http://169.254.169.254/latest/meta-data/local-ipv4)\"\n\n# Create local config files\nsudo -u splunk mkdir -p /opt/splunk/etc/system/local\n\ncat \u003c\u003cEOF | sudo -u splunk tee /opt/splunk/etc/system/local/deploymentclient.conf\n${deploymentclient_conf_content}\nEOF\n\ncat \u003c\u003cEOF | sudo -u splunk tee /opt/splunk/etc/system/local/web.conf\n${web_conf_content}\nEOF\n\ncat \u003c\u003cEOF | sudo -u splunk tee /opt/splunk/etc/system/local/server.conf\n${server_conf_content}\nEOF\nsed -i 's/LOCAL_IP/'$${INSTANCE_IP}'/' /opt/splunk/etc/system/local/server.conf\n\ncat \u003c\u003cEOF | sudo -u splunk tee /opt/splunk/etc/system/local/serverclass.conf\n${serverclass_conf_content}\nEOF\n\n# Update hostname\nhostname splunk-${role}-`hostname`\necho `hostname` \u003e /etc/hostname\nsed -i 's/localhost$/localhost '`hostname`'/' /etc/hosts\n\n\n# Start service and Enable autostart\nsudo -u splunk /opt/splunk/bin/splunk enable boot-start -user splunk --accept-license\n\nexport SPLUNK_START_ARGS=--accept-license --answer-yes --no-prompt\n${cmds_content}\n\n# sudo -u splunk /opt/splunk/bin/splunk start --accept-license\nsudo -u splunk /opt/splunk/bin/entrypoint.sh start-service\n",
                            "vars.%": "6",
                            "vars.cmds_content": "",
                            "vars.deploymentclient_conf_content": "",
                            "vars.role": "deploymentserver",
                            "vars.server_conf_content": "",
                            "vars.serverclass_conf_content": "[serverClass:sc_master]\nstateOnClient = \"noop\"\nwhitelist.0 = cluster-master\n\n[serverClass:sc_searchhead]\nwhitelist.0 = *\nblacklist.0 = cluster-master\n",
                            "vars.web_conf_content": "[settings]\nhttpport        = 8000\nmgmtHostPort    = 127.0.0.1:8089\n"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": ""
                },
                "template_file.user_data_indexer": {
                    "type": "template_file",
                    "depends_on": [
                        "template_file.server_conf_indexer",
                        "template_file.web_conf"
                    ],
                    "primary": {
                        "id": "7224e7f9e9c8c8e87894b24f880316ce416f681cae6b5cd9d4d16ad28a083c8e",
                        "attributes": {
                            "id": "7224e7f9e9c8c8e87894b24f880316ce416f681cae6b5cd9d4d16ad28a083c8e",
                            "rendered": "#!/bin/bash\nset -x\nexec 1\u003e /var/tmp/mylog 2\u003e\u00261\n\n\n\nINSTANCE_IP=\"$(curl http://169.254.169.254/latest/meta-data/local-ipv4)\"\n\n# Create local config files\nsudo -u splunk mkdir -p /opt/splunk/etc/system/local\n\ncat \u003c\u003cEOF | sudo -u splunk tee /opt/splunk/etc/system/local/deploymentclient.conf\n\nEOF\n\ncat \u003c\u003cEOF | sudo -u splunk tee /opt/splunk/etc/system/local/web.conf\n[settings]\nhttpport        = 8000\nmgmtHostPort    = 127.0.0.1:8089\n\nEOF\n\ncat \u003c\u003cEOF | sudo -u splunk tee /opt/splunk/etc/system/local/server.conf\n[replication_port://9887]\n\n[clustering]\nmode = slave\nmaster_uri = https://10.30.45.234:8089\npass4SymmKey = BitchBetterHaveMyMoney\n\nEOF\nsed -i 's/LOCAL_IP/'${INSTANCE_IP}'/' /opt/splunk/etc/system/local/server.conf\n\ncat \u003c\u003cEOF | sudo -u splunk tee /opt/splunk/etc/system/local/serverclass.conf\n\nEOF\n\n# Update hostname\nhostname splunk-indexer-`hostname`\necho `hostname` \u003e /etc/hostname\nsed -i 's/localhost$/localhost '`hostname`'/' /etc/hosts\n\n\n# Start service and Enable autostart\nsudo -u splunk /opt/splunk/bin/splunk enable boot-start -user splunk --accept-license\n\nexport SPLUNK_START_ARGS=--accept-license --answer-yes --no-prompt\n\n\n# sudo -u splunk /opt/splunk/bin/splunk start --accept-license\nsudo -u splunk /opt/splunk/bin/entrypoint.sh start-service\n",
                            "template": "#!/bin/bash\nset -x\nexec 1\u003e /var/tmp/mylog 2\u003e\u00261\n\n\n\nINSTANCE_IP=\"$(curl http://169.254.169.254/latest/meta-data/local-ipv4)\"\n\n# Create local config files\nsudo -u splunk mkdir -p /opt/splunk/etc/system/local\n\ncat \u003c\u003cEOF | sudo -u splunk tee /opt/splunk/etc/system/local/deploymentclient.conf\n${deploymentclient_conf_content}\nEOF\n\ncat \u003c\u003cEOF | sudo -u splunk tee /opt/splunk/etc/system/local/web.conf\n${web_conf_content}\nEOF\n\ncat \u003c\u003cEOF | sudo -u splunk tee /opt/splunk/etc/system/local/server.conf\n${server_conf_content}\nEOF\nsed -i 's/LOCAL_IP/'$${INSTANCE_IP}'/' /opt/splunk/etc/system/local/server.conf\n\ncat \u003c\u003cEOF | sudo -u splunk tee /opt/splunk/etc/system/local/serverclass.conf\n${serverclass_conf_content}\nEOF\n\n# Update hostname\nhostname splunk-${role}-`hostname`\necho `hostname` \u003e /etc/hostname\nsed -i 's/localhost$/localhost '`hostname`'/' /etc/hosts\n\n\n# Start service and Enable autostart\nsudo -u splunk /opt/splunk/bin/splunk enable boot-start -user splunk --accept-license\n\nexport SPLUNK_START_ARGS=--accept-license --answer-yes --no-prompt\n${cmds_content}\n\n# sudo -u splunk /opt/splunk/bin/splunk start --accept-license\nsudo -u splunk /opt/splunk/bin/entrypoint.sh start-service\n",
                            "vars.%": "6",
                            "vars.cmds_content": "",
                            "vars.deploymentclient_conf_content": "",
                            "vars.role": "indexer",
                            "vars.server_conf_content": "[replication_port://9887]\n\n[clustering]\nmode = slave\nmaster_uri = https://10.30.45.234:8089\npass4SymmKey = BitchBetterHaveMyMoney\n",
                            "vars.serverclass_conf_content": "",
                            "vars.web_conf_content": "[settings]\nhttpport        = 8000\nmgmtHostPort    = 127.0.0.1:8089\n"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": ""
                },
                "template_file.user_data_master": {
                    "type": "template_file",
                    "depends_on": [
                        "template_file.deploymentclient_conf",
                        "template_file.server_conf_master",
                        "template_file.web_conf"
                    ],
                    "primary": {
                        "id": "1e3a54cc080cf25d81a3fa13816502261840310c61b986239afacb4236e114bd",
                        "attributes": {
                            "id": "1e3a54cc080cf25d81a3fa13816502261840310c61b986239afacb4236e114bd",
                            "rendered": "#!/bin/bash\nset -x\nexec 1\u003e /var/tmp/mylog 2\u003e\u00261\n\n\n\nINSTANCE_IP=\"$(curl http://169.254.169.254/latest/meta-data/local-ipv4)\"\n\n# Create local config files\nsudo -u splunk mkdir -p /opt/splunk/etc/system/local\n\ncat \u003c\u003cEOF | sudo -u splunk tee /opt/splunk/etc/system/local/deploymentclient.conf\n[deployment-client]\nserverRepositoryLocationPolicy = rejectAlways\nrepositoryLocation = \\$SPLUNK_HOME/etc/master-apps\n[target-broker:deploymentServer]\ntargetUri = deployment-server:8089\n\n\nEOF\n\ncat \u003c\u003cEOF | sudo -u splunk tee /opt/splunk/etc/system/local/web.conf\n[settings]\nhttpport        = 8000\nmgmtHostPort    = 127.0.0.1:8089\n\nEOF\n\ncat \u003c\u003cEOF | sudo -u splunk tee /opt/splunk/etc/system/local/server.conf\n[clustering]\nmode = master\nreplication_factor = 2\nsearch_factor = 2\npass4SymmKey = BitchBetterHaveMyMoney\n\n[shclustering]\nid = 776D2949-B2DA-405E-96B3-B6688C87AB7D\npass4SymmKey = BitchBetterHaveMyMoney\nshcluster_label = shcluster\n\nEOF\nsed -i 's/LOCAL_IP/'${INSTANCE_IP}'/' /opt/splunk/etc/system/local/server.conf\n\ncat \u003c\u003cEOF | sudo -u splunk tee /opt/splunk/etc/system/local/serverclass.conf\n\nEOF\n\n# Update hostname\nhostname splunk-master-`hostname`\necho `hostname` \u003e /etc/hostname\nsed -i 's/localhost$/localhost '`hostname`'/' /etc/hosts\n\n\n# Start service and Enable autostart\nsudo -u splunk /opt/splunk/bin/splunk enable boot-start -user splunk --accept-license\n\nexport SPLUNK_START_ARGS=--accept-license --answer-yes --no-prompt\nexport SPLUNK_CMD_1=cmd python /opt/splunk/bin/splunk_setup.py --wait-splunk 'https://searchhead-1:8089' '(shc_member|shc_captain)'\nexport SPLUNK_CMD_2=cmd python /opt/splunk/bin/splunk_setup.py --wait-splunk 'https://searchhead-2:8089' '(shc_member|shc_captain)'\nexport SPLUNK_CMD_4=add search-server searchhead-1:8089 -remoteUsername admin -remotePassword changed -auth admin:changeme\nexport SPLUNK_CMD_5=add search-server searchhead-2:8089 -remoteUsername admin -remotePassword changed -auth admin:changeme\nexport SPLUNK_CMD_7=status\n    \n\n# sudo -u splunk /opt/splunk/bin/splunk start --accept-license\nsudo -u splunk /opt/splunk/bin/entrypoint.sh start-service\n",
                            "template": "#!/bin/bash\nset -x\nexec 1\u003e /var/tmp/mylog 2\u003e\u00261\n\n\n\nINSTANCE_IP=\"$(curl http://169.254.169.254/latest/meta-data/local-ipv4)\"\n\n# Create local config files\nsudo -u splunk mkdir -p /opt/splunk/etc/system/local\n\ncat \u003c\u003cEOF | sudo -u splunk tee /opt/splunk/etc/system/local/deploymentclient.conf\n${deploymentclient_conf_content}\nEOF\n\ncat \u003c\u003cEOF | sudo -u splunk tee /opt/splunk/etc/system/local/web.conf\n${web_conf_content}\nEOF\n\ncat \u003c\u003cEOF | sudo -u splunk tee /opt/splunk/etc/system/local/server.conf\n${server_conf_content}\nEOF\nsed -i 's/LOCAL_IP/'$${INSTANCE_IP}'/' /opt/splunk/etc/system/local/server.conf\n\ncat \u003c\u003cEOF | sudo -u splunk tee /opt/splunk/etc/system/local/serverclass.conf\n${serverclass_conf_content}\nEOF\n\n# Update hostname\nhostname splunk-${role}-`hostname`\necho `hostname` \u003e /etc/hostname\nsed -i 's/localhost$/localhost '`hostname`'/' /etc/hosts\n\n\n# Start service and Enable autostart\nsudo -u splunk /opt/splunk/bin/splunk enable boot-start -user splunk --accept-license\n\nexport SPLUNK_START_ARGS=--accept-license --answer-yes --no-prompt\n${cmds_content}\n\n# sudo -u splunk /opt/splunk/bin/splunk start --accept-license\nsudo -u splunk /opt/splunk/bin/entrypoint.sh start-service\n",
                            "vars.%": "6",
                            "vars.cmds_content": "export SPLUNK_CMD_1=cmd python /opt/splunk/bin/splunk_setup.py --wait-splunk 'https://searchhead-1:8089' '(shc_member|shc_captain)'\nexport SPLUNK_CMD_2=cmd python /opt/splunk/bin/splunk_setup.py --wait-splunk 'https://searchhead-2:8089' '(shc_member|shc_captain)'\nexport SPLUNK_CMD_4=add search-server searchhead-1:8089 -remoteUsername admin -remotePassword changed -auth admin:changeme\nexport SPLUNK_CMD_5=add search-server searchhead-2:8089 -remoteUsername admin -remotePassword changed -auth admin:changeme\nexport SPLUNK_CMD_7=status\n    ",
                            "vars.deploymentclient_conf_content": "[deployment-client]\nserverRepositoryLocationPolicy = rejectAlways\nrepositoryLocation = \\$SPLUNK_HOME/etc/master-apps\n[target-broker:deploymentServer]\ntargetUri = deployment-server:8089\n\n",
                            "vars.role": "master",
                            "vars.server_conf_content": "[clustering]\nmode = master\nreplication_factor = 2\nsearch_factor = 2\npass4SymmKey = BitchBetterHaveMyMoney\n\n[shclustering]\nid = 776D2949-B2DA-405E-96B3-B6688C87AB7D\npass4SymmKey = BitchBetterHaveMyMoney\nshcluster_label = shcluster\n",
                            "vars.serverclass_conf_content": "",
                            "vars.web_conf_content": "[settings]\nhttpport        = 8000\nmgmtHostPort    = 127.0.0.1:8089\n"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": ""
                },
                "template_file.user_data_searchhead": {
                    "type": "template_file",
                    "depends_on": [
                        "template_file.deploymentclient_conf",
                        "template_file.server_conf_searchhead",
                        "template_file.web_conf"
                    ],
                    "primary": {
                        "id": "cfee6580e6950fe1a7d89a7aeab90fa8bc7b201f5af3a76021c94fc14750e1ef",
                        "attributes": {
                            "id": "cfee6580e6950fe1a7d89a7aeab90fa8bc7b201f5af3a76021c94fc14750e1ef",
                            "rendered": "#!/bin/bash\nset -x\nexec 1\u003e /var/tmp/mylog 2\u003e\u00261\n\n\n\nINSTANCE_IP=\"$(curl http://169.254.169.254/latest/meta-data/local-ipv4)\"\n\n# Create local config files\nsudo -u splunk mkdir -p /opt/splunk/etc/system/local\n\ncat \u003c\u003cEOF | sudo -u splunk tee /opt/splunk/etc/system/local/deploymentclient.conf\n[target-broker:deploymentServer]\ntargetUri = deployment-server:8089\n\nEOF\n\ncat \u003c\u003cEOF | sudo -u splunk tee /opt/splunk/etc/system/local/web.conf\n[settings]\nhttpport        = 8000\nmgmtHostPort    = 127.0.0.1:8089\n\nEOF\n\ncat \u003c\u003cEOF | sudo -u splunk tee /opt/splunk/etc/system/local/server.conf\n[general]\nallowRemoteLogin = always\n\n[clustering]\nmode = searchhead\nmaster_uri = https://cluster-master:8089\npass4SymmKey = BitchBetterHaveMyMoney\n\n[replication_port://9887]\n\n[shclustering]\nid = 776D2949-B2DA-405E-96B3-B6688C87AB7D\nconf_deploy_fetch_url = https://cluster-master:8089\ndisabled = false\nelection_timeout_ms = 10000\nmgmt_uri = https://LOCAL_IP:8089\npass4SymmKey = BitchBetterHaveMyMoney\nreplication_factor = 2\nshcluster_label = shcluster\n\nEOF\nsed -i 's/LOCAL_IP/'${INSTANCE_IP}'/' /opt/splunk/etc/system/local/server.conf\n\ncat \u003c\u003cEOF | sudo -u splunk tee /opt/splunk/etc/system/local/serverclass.conf\n\nEOF\n\n# Update hostname\nhostname splunk-searchhead-`hostname`\necho `hostname` \u003e /etc/hostname\nsed -i 's/localhost$/localhost '`hostname`'/' /etc/hosts\n\n\n# Start service and Enable autostart\nsudo -u splunk /opt/splunk/bin/splunk enable boot-start -user splunk --accept-license\n\nexport SPLUNK_START_ARGS=--accept-license --answer-yes --no-prompt\nexport SPLUNK_CMD_1=cmd python /opt/splunk/bin/splunk_setup.py --shc-autobootstrap 2 https://${INSTANCE_IP}:8089 admin changed 'https://cluster-master:8089/servicesNS/nobody/system/storage/collections/data/service_discovery' service_discovery_user service_discovery_password\nexport SPLUNK_CMD_2=status\n    \n\n# sudo -u splunk /opt/splunk/bin/splunk start --accept-license\nsudo -u splunk /opt/splunk/bin/entrypoint.sh start-service\n",
                            "template": "#!/bin/bash\nset -x\nexec 1\u003e /var/tmp/mylog 2\u003e\u00261\n\n\n\nINSTANCE_IP=\"$(curl http://169.254.169.254/latest/meta-data/local-ipv4)\"\n\n# Create local config files\nsudo -u splunk mkdir -p /opt/splunk/etc/system/local\n\ncat \u003c\u003cEOF | sudo -u splunk tee /opt/splunk/etc/system/local/deploymentclient.conf\n${deploymentclient_conf_content}\nEOF\n\ncat \u003c\u003cEOF | sudo -u splunk tee /opt/splunk/etc/system/local/web.conf\n${web_conf_content}\nEOF\n\ncat \u003c\u003cEOF | sudo -u splunk tee /opt/splunk/etc/system/local/server.conf\n${server_conf_content}\nEOF\nsed -i 's/LOCAL_IP/'$${INSTANCE_IP}'/' /opt/splunk/etc/system/local/server.conf\n\ncat \u003c\u003cEOF | sudo -u splunk tee /opt/splunk/etc/system/local/serverclass.conf\n${serverclass_conf_content}\nEOF\n\n# Update hostname\nhostname splunk-${role}-`hostname`\necho `hostname` \u003e /etc/hostname\nsed -i 's/localhost$/localhost '`hostname`'/' /etc/hosts\n\n\n# Start service and Enable autostart\nsudo -u splunk /opt/splunk/bin/splunk enable boot-start -user splunk --accept-license\n\nexport SPLUNK_START_ARGS=--accept-license --answer-yes --no-prompt\n${cmds_content}\n\n# sudo -u splunk /opt/splunk/bin/splunk start --accept-license\nsudo -u splunk /opt/splunk/bin/entrypoint.sh start-service\n",
                            "vars.%": "6",
                            "vars.cmds_content": "export SPLUNK_CMD_1=cmd python /opt/splunk/bin/splunk_setup.py --shc-autobootstrap 2 https://${INSTANCE_IP}:8089 admin changed 'https://cluster-master:8089/servicesNS/nobody/system/storage/collections/data/service_discovery' service_discovery_user service_discovery_password\nexport SPLUNK_CMD_2=status\n    ",
                            "vars.deploymentclient_conf_content": "[target-broker:deploymentServer]\ntargetUri = deployment-server:8089\n",
                            "vars.role": "searchhead",
                            "vars.server_conf_content": "[general]\nallowRemoteLogin = always\n\n[clustering]\nmode = searchhead\nmaster_uri = https://cluster-master:8089\npass4SymmKey = BitchBetterHaveMyMoney\n\n[replication_port://9887]\n\n[shclustering]\nid = 776D2949-B2DA-405E-96B3-B6688C87AB7D\nconf_deploy_fetch_url = https://cluster-master:8089\ndisabled = false\nelection_timeout_ms = 10000\nmgmt_uri = https://LOCAL_IP:8089\npass4SymmKey = BitchBetterHaveMyMoney\nreplication_factor = 2\nshcluster_label = shcluster\n",
                            "vars.serverclass_conf_content": "",
                            "vars.web_conf_content": "[settings]\nhttpport        = 8000\nmgmtHostPort    = 127.0.0.1:8089\n"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": ""
                },
                "template_file.web_conf": {
                    "type": "template_file",
                    "depends_on": [],
                    "primary": {
                        "id": "205715e642af9deb7ab0b5d3a220fa2747bf5e668b918064994abf57066eabd5",
                        "attributes": {
                            "id": "205715e642af9deb7ab0b5d3a220fa2747bf5e668b918064994abf57066eabd5",
                            "rendered": "[settings]\nhttpport        = 8000\nmgmtHostPort    = 127.0.0.1:8089\n",
                            "template": "[settings]\nhttpport        = ${httpport}\nmgmtHostPort    = 127.0.0.1:${mgmtHostPort}\n",
                            "vars.%": "2",
                            "vars.httpport": "8000",
                            "vars.mgmtHostPort": "8089"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": ""
                }
            },
            "depends_on": []
        },
        {
            "path": [
                "root",
                "consul"
            ],
            "outputs": {
                "server_address": {
                    "sensitive": false,
                    "type": "string",
                    "value": "ec2-35-165-118-234.us-west-2.compute.amazonaws.com"
                }
            },
            "resources": {
                "aws_instance.server": {
                    "type": "aws_instance",
                    "depends_on": [
                        "aws_security_group.consul",
                        "template_file.server_install"
                    ],
                    "primary": {
                        "id": "i-e00b7574",
                        "attributes": {
                            "ami": "ami-b22981d2",
                            "associate_public_ip_address": "true",
                            "availability_zone": "us-west-2a",
                            "disable_api_termination": "false",
                            "ebs_block_device.#": "0",
                            "ebs_optimized": "false",
                            "ephemeral_block_device.#": "0",
                            "iam_instance_profile": "",
                            "id": "i-e00b7574",
                            "instance_state": "running",
                            "instance_type": "t2.micro",
                            "key_name": "dev_key",
                            "monitoring": "false",
                            "network_interface_id": "eni-0aaa894a",
                            "private_dns": "ip-172-31-44-148.us-west-2.compute.internal",
                            "private_ip": "172.31.44.148",
                            "public_dns": "ec2-35-165-118-234.us-west-2.compute.amazonaws.com",
                            "public_ip": "35.165.118.234",
                            "root_block_device.#": "1",
                            "root_block_device.0.delete_on_termination": "true",
                            "root_block_device.0.iops": "0",
                            "root_block_device.0.volume_size": "8",
                            "root_block_device.0.volume_type": "standard",
                            "security_groups.#": "1",
                            "security_groups.3694337380": "consul_ubuntu",
                            "source_dest_check": "true",
                            "subnet_id": "subnet-f4d45583",
                            "tags.%": "2",
                            "tags.ConsulRole": "Server",
                            "tags.Name": "consul-0",
                            "tenancy": "default",
                            "vpc_security_group_ids.#": "0"
                        },
                        "meta": {
                            "schema_version": "1"
                        },
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": ""
                },
                "aws_security_group.consul": {
                    "type": "aws_security_group",
                    "depends_on": [],
                    "primary": {
                        "id": "sg-678c991e",
                        "attributes": {
                            "description": "Consul internal traffic + maintenance.",
                            "egress.#": "1",
                            "egress.482069346.cidr_blocks.#": "1",
                            "egress.482069346.cidr_blocks.0": "0.0.0.0/0",
                            "egress.482069346.from_port": "0",
                            "egress.482069346.prefix_list_ids.#": "0",
                            "egress.482069346.protocol": "-1",
                            "egress.482069346.security_groups.#": "0",
                            "egress.482069346.self": "false",
                            "egress.482069346.to_port": "0",
                            "id": "sg-678c991e",
                            "ingress.#": "4",
                            "ingress.2541437006.cidr_blocks.#": "1",
                            "ingress.2541437006.cidr_blocks.0": "0.0.0.0/0",
                            "ingress.2541437006.from_port": "22",
                            "ingress.2541437006.protocol": "tcp",
                            "ingress.2541437006.security_groups.#": "0",
                            "ingress.2541437006.self": "false",
                            "ingress.2541437006.to_port": "22",
                            "ingress.3472572478.cidr_blocks.#": "0",
                            "ingress.3472572478.from_port": "0",
                            "ingress.3472572478.protocol": "udp",
                            "ingress.3472572478.security_groups.#": "0",
                            "ingress.3472572478.self": "true",
                            "ingress.3472572478.to_port": "65535",
                            "ingress.3482902040.cidr_blocks.#": "1",
                            "ingress.3482902040.cidr_blocks.0": "0.0.0.0/0",
                            "ingress.3482902040.from_port": "8500",
                            "ingress.3482902040.protocol": "tcp",
                            "ingress.3482902040.security_groups.#": "0",
                            "ingress.3482902040.self": "false",
                            "ingress.3482902040.to_port": "8500",
                            "ingress.3544538468.cidr_blocks.#": "0",
                            "ingress.3544538468.from_port": "0",
                            "ingress.3544538468.protocol": "tcp",
                            "ingress.3544538468.security_groups.#": "0",
                            "ingress.3544538468.self": "true",
                            "ingress.3544538468.to_port": "65535",
                            "name": "consul_ubuntu",
                            "owner_id": "069884434102",
                            "tags.%": "0",
                            "vpc_id": "vpc-b1c24ad4"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": ""
                },
                "template_file.server_install": {
                    "type": "template_file",
                    "depends_on": [],
                    "primary": {
                        "id": "3a45ebb5bf9788240652dfbb400be38ea00116e08b4372e006cf4162aed19134",
                        "attributes": {
                            "id": "3a45ebb5bf9788240652dfbb400be38ea00116e08b4372e006cf4162aed19134",
                            "rendered": "#!/usr/bin/env bash\nset -e\n\necho \"Installing dependencies...\"\nif [ -x \"$(command -v apt-get)\" ]; then\n  sudo apt-get update -y\n  sudo apt-get install -y unzip\nelse\n  sudo yum update -y\n  sudo yum install -y unzip wget\nfi\n\n\necho \"Fetching Consul...\"\nCONSUL=0.7.1\ncd /tmp\nwget https://releases.hashicorp.com/consul/${CONSUL}/consul_${CONSUL}_linux_amd64.zip -O consul.zip\n\necho \"Installing Consul...\"\nunzip consul.zip \u003e/dev/null\nchmod +x consul\nsudo mv consul /usr/local/bin/consul\nsudo mkdir -p /opt/consul/data\n\n# Read from the file we created\nSERVER_COUNT=$(cat /tmp/consul-server-count | tr -d '\\n')\nCONSUL_JOIN=$(cat /tmp/consul-server-addr | tr -d '\\n')\n\n# Write the flags to a temporary file\ncat \u003e/tmp/consul_flags \u003c\u003c EOF\nCONSUL_FLAGS=\"-server -bootstrap-expect=${SERVER_COUNT} -join=${CONSUL_JOIN} -data-dir=/opt/consul/data -ui -client 0.0.0.0\"\nEOF\n\nif [ -f /tmp/upstart.conf ];\nthen\n  echo \"Installing Upstart service...\"\n  sudo mkdir -p /etc/consul.d\n  sudo mkdir -p /etc/service\n  sudo chown root:root /tmp/upstart.conf\n  sudo mv /tmp/upstart.conf /etc/init/consul.conf\n  sudo chmod 0644 /etc/init/consul.conf\n  sudo mv /tmp/consul_flags /etc/service/consul\n  sudo chmod 0644 /etc/service/consul\nelse\n  echo \"Installing Systemd service...\"\n  sudo mkdir -p /etc/systemd/system/consul.d\n  sudo chown root:root /tmp/consul.service\n  sudo mv /tmp/consul.service /etc/systemd/system/consul.service\n  sudo chmod 0644 /etc/systemd/system/consul.service\n  sudo mv /tmp/consul_flags /etc/sysconfig/consul\n  sudo chown root:root /etc/sysconfig/consul\n  sudo chmod 0644 /etc/sysconfig/consul\nfi\n",
                            "template": "/Workspaces/Terraform-Splunk/.terraform/modules/77e3b4b68d49fdbc6a8eb16e2515bef4/scripts/install.tpl",
                            "vars.%": "1",
                            "vars.consul_params": "-server -bootstrap-expect=${SERVER_COUNT} -join=${CONSUL_JOIN} -data-dir=/opt/consul/data -ui -client 0.0.0.0"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": ""
                }
            },
            "depends_on": []
        },
        {
            "path": [
                "root",
                "stack"
            ],
            "outputs": {
                "availability_zones": {
                    "sensitive": false,
                    "type": "list",
                    "value": [
                        "us-west-2a",
                        "us-west-2b",
                        "us-west-2c"
                    ]
                },
                "bastion_ip": {
                    "sensitive": false,
                    "type": "string",
                    "value": "35.165.175.248"
                },
                "cluster": {
                    "sensitive": false,
                    "type": "string",
                    "value": "splunk"
                },
                "domain_name": {
                    "sensitive": false,
                    "type": "string",
                    "value": "stack.local"
                },
                "ecs_cluster_security_group_id": {
                    "sensitive": false,
                    "type": "string",
                    "value": "sg-4e8c9937"
                },
                "environment": {
                    "sensitive": false,
                    "type": "string",
                    "value": "ac"
                },
                "external_elb": {
                    "sensitive": false,
                    "type": "string",
                    "value": "sg-538c992a"
                },
                "external_route_tables": {
                    "sensitive": false,
                    "type": "string",
                    "value": "rtb-0a274a6d"
                },
                "external_subnets": {
                    "sensitive": false,
                    "type": "list",
                    "value": [
                        "subnet-adc4d2db",
                        "subnet-495da12e",
                        "subnet-0a703752"
                    ]
                },
                "iam_role": {
                    "sensitive": false,
                    "type": "string",
                    "value": "arn:aws:iam::069884434102:role/ecs-role-splunk-ac"
                },
                "iam_role_default_ecs_role_id": {
                    "sensitive": false,
                    "type": "string",
                    "value": "ecs-role-splunk-ac"
                },
                "internal_elb": {
                    "sensitive": false,
                    "type": "string",
                    "value": "sg-518c9928"
                },
                "internal_route_tables": {
                    "sensitive": false,
                    "type": "string",
                    "value": "rtb-17274a70,rtb-08274a6f,rtb-09274a6e"
                },
                "internal_subnets": {
                    "sensitive": false,
                    "type": "list",
                    "value": [
                        "subnet-acc4d2da",
                        "subnet-575da130",
                        "subnet-0d703755"
                    ]
                },
                "log_bucket_id": {
                    "sensitive": false,
                    "type": "string",
                    "value": "splunk-ac-logs"
                },
                "region": {
                    "sensitive": false,
                    "type": "string",
                    "value": "us-west-2"
                },
                "vpc_id": {
                    "sensitive": false,
                    "type": "string",
                    "value": "vpc-28825e4f"
                },
                "vpc_security_group": {
                    "sensitive": false,
                    "type": "string",
                    "value": "sg-668c991f"
                },
                "zone_id": {
                    "sensitive": false,
                    "type": "string",
                    "value": "Z3IFQV4G9V5CE4"
                }
            },
            "resources": {},
            "depends_on": []
        },
        {
            "path": [
                "root",
                "stack",
                "bastion"
            ],
            "outputs": {
                "external_ip": {
                    "sensitive": false,
                    "type": "string",
                    "value": "35.165.175.248"
                }
            },
            "resources": {
                "aws_eip.bastion": {
                    "type": "aws_eip",
                    "depends_on": [
                        "aws_instance.bastion"
                    ],
                    "primary": {
                        "id": "eipalloc-b41459d3",
                        "attributes": {
                            "association_id": "eipassoc-a3307cd8",
                            "domain": "vpc",
                            "id": "eipalloc-b41459d3",
                            "instance": "i-580a74cc",
                            "network_interface": "eni-2ea98a6e",
                            "private_ip": "10.30.45.30",
                            "public_ip": "35.165.175.248",
                            "vpc": "true"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": ""
                },
                "aws_instance.bastion": {
                    "type": "aws_instance",
                    "depends_on": [
                        "module.ami"
                    ],
                    "primary": {
                        "id": "i-580a74cc",
                        "attributes": {
                            "ami": "ami-6418c304",
                            "associate_public_ip_address": "true",
                            "availability_zone": "us-west-2a",
                            "disable_api_termination": "false",
                            "ebs_block_device.#": "0",
                            "ebs_optimized": "false",
                            "ephemeral_block_device.#": "0",
                            "iam_instance_profile": "",
                            "id": "i-580a74cc",
                            "instance_state": "running",
                            "instance_type": "t2.micro",
                            "key_name": "dev_key",
                            "monitoring": "true",
                            "network_interface_id": "eni-2ea98a6e",
                            "private_dns": "ip-10-30-45-30.us-west-2.compute.internal",
                            "private_ip": "10.30.45.30",
                            "public_dns": "ec2-35-165-175-248.us-west-2.compute.amazonaws.com",
                            "public_ip": "35.165.175.248",
                            "root_block_device.#": "1",
                            "root_block_device.0.delete_on_termination": "true",
                            "root_block_device.0.iops": "0",
                            "root_block_device.0.volume_size": "8",
                            "root_block_device.0.volume_type": "standard",
                            "security_groups.#": "0",
                            "source_dest_check": "false",
                            "subnet_id": "subnet-adc4d2db",
                            "tags.%": "2",
                            "tags.Environment": "ac",
                            "tags.Name": "bastion",
                            "tenancy": "default",
                            "user_data": "cf42d762f18d5a5e0a3893f247a8e1ff94dd92c9",
                            "vpc_security_group_ids.#": "2",
                            "vpc_security_group_ids.198916792": "sg-508c9929",
                            "vpc_security_group_ids.2480882663": "sg-568c992f"
                        },
                        "meta": {
                            "schema_version": "1"
                        },
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": ""
                }
            },
            "depends_on": []
        },
        {
            "path": [
                "root",
                "stack",
                "defaults"
            ],
            "outputs": {
                "domain_name_servers": {
                    "sensitive": false,
                    "type": "string",
                    "value": "10.30.0.2"
                },
                "ecs_ami": {
                    "sensitive": false,
                    "type": "string",
                    "value": "ami-f3985d93"
                },
                "s3_logs_account_id": {
                    "sensitive": false,
                    "type": "string",
                    "value": "797873946194"
                }
            },
            "resources": {},
            "depends_on": []
        },
        {
            "path": [
                "root",
                "stack",
                "dhcp"
            ],
            "outputs": {},
            "resources": {
                "aws_vpc_dhcp_options.dns_resolver": {
                    "type": "aws_vpc_dhcp_options",
                    "depends_on": [],
                    "primary": {
                        "id": "dopt-e60b2d82",
                        "attributes": {
                            "domain_name": "stack.local",
                            "domain_name_servers.#": "1",
                            "domain_name_servers.0": "10.30.0.2",
                            "id": "dopt-e60b2d82",
                            "tags.%": "0"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": ""
                },
                "aws_vpc_dhcp_options_association.dns_resolver": {
                    "type": "aws_vpc_dhcp_options_association",
                    "depends_on": [
                        "aws_vpc_dhcp_options.dns_resolver"
                    ],
                    "primary": {
                        "id": "dopt-e60b2d82-vpc-28825e4f",
                        "attributes": {
                            "dhcp_options_id": "dopt-e60b2d82",
                            "id": "dopt-e60b2d82-vpc-28825e4f",
                            "vpc_id": "vpc-28825e4f"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": ""
                }
            },
            "depends_on": []
        },
        {
            "path": [
                "root",
                "stack",
                "dns"
            ],
            "outputs": {
                "name": {
                    "sensitive": false,
                    "type": "string",
                    "value": "stack.local"
                },
                "name_servers": {
                    "sensitive": false,
                    "type": "string",
                    "value": "ns-0.awsdns-00.com.,ns-1024.awsdns-00.org.,ns-1536.awsdns-00.co.uk.,ns-512.awsdns-00.net."
                },
                "zone_id": {
                    "sensitive": false,
                    "type": "string",
                    "value": "Z3IFQV4G9V5CE4"
                }
            },
            "resources": {
                "aws_route53_zone.main": {
                    "type": "aws_route53_zone",
                    "depends_on": [],
                    "primary": {
                        "id": "Z3IFQV4G9V5CE4",
                        "attributes": {
                            "force_destroy": "false",
                            "id": "Z3IFQV4G9V5CE4",
                            "name": "stack.local",
                            "name_servers.#": "4",
                            "name_servers.0": "ns-0.awsdns-00.com.",
                            "name_servers.1": "ns-1024.awsdns-00.org.",
                            "name_servers.2": "ns-1536.awsdns-00.co.uk.",
                            "name_servers.3": "ns-512.awsdns-00.net.",
                            "tags.%": "0",
                            "vpc_id": "vpc-28825e4f",
                            "vpc_region": "us-west-2",
                            "zone_id": "Z3IFQV4G9V5CE4"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": ""
                }
            },
            "depends_on": []
        },
        {
            "path": [
                "root",
                "stack",
                "ecs_cluster"
            ],
            "outputs": {
                "name": {
                    "sensitive": false,
                    "type": "string",
                    "value": "splunk"
                },
                "security_group_id": {
                    "sensitive": false,
                    "type": "string",
                    "value": "sg-4e8c9937"
                }
            },
            "resources": {
                "aws_autoscaling_group.main": {
                    "type": "aws_autoscaling_group",
                    "depends_on": [
                        "aws_launch_configuration.main"
                    ],
                    "primary": {
                        "id": "splunk",
                        "attributes": {
                            "arn": "arn:aws:autoscaling:us-west-2:069884434102:autoScalingGroup:f88dbcfa-6087-4693-b928-d2cefbea9182:autoScalingGroupName/splunk",
                            "availability_zones.#": "3",
                            "availability_zones.2050015877": "us-west-2c",
                            "availability_zones.221770259": "us-west-2b",
                            "availability_zones.2487133097": "us-west-2a",
                            "default_cooldown": "300",
                            "desired_capacity": "3",
                            "force_delete": "false",
                            "health_check_grace_period": "300",
                            "health_check_type": "EC2",
                            "id": "splunk",
                            "launch_configuration": "splunk-20161212023411891148134vjt",
                            "load_balancers.#": "0",
                            "max_size": "100",
                            "metrics_granularity": "1Minute",
                            "min_size": "3",
                            "name": "splunk",
                            "placement_group": "",
                            "protect_from_scale_in": "false",
                            "tag.#": "3",
                            "tag.1747999774.key": "Cluster",
                            "tag.1747999774.propagate_at_launch": "true",
                            "tag.1747999774.value": "splunk",
                            "tag.2593238284.key": "Environment",
                            "tag.2593238284.propagate_at_launch": "true",
                            "tag.2593238284.value": "ac",
                            "tag.3913815344.key": "Name",
                            "tag.3913815344.propagate_at_launch": "true",
                            "tag.3913815344.value": "splunk",
                            "target_group_arns.#": "0",
                            "termination_policies.#": "2",
                            "termination_policies.0": "OldestLaunchConfiguration",
                            "termination_policies.1": "Default",
                            "vpc_zone_identifier.#": "3",
                            "vpc_zone_identifier.1073745790": "subnet-575da130",
                            "vpc_zone_identifier.2017263453": "subnet-acc4d2da",
                            "vpc_zone_identifier.3644838562": "subnet-0d703755",
                            "wait_for_capacity_timeout": "10m"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": ""
                },
                "aws_autoscaling_policy.scale_down": {
                    "type": "aws_autoscaling_policy",
                    "depends_on": [
                        "aws_autoscaling_group.main"
                    ],
                    "primary": {
                        "id": "splunk-scaledown",
                        "attributes": {
                            "adjustment_type": "ChangeInCapacity",
                            "arn": "arn:aws:autoscaling:us-west-2:069884434102:scalingPolicy:43a684b9-4583-4d41-acc4-84691177d51d:autoScalingGroupName/splunk:policyName/splunk-scaledown",
                            "autoscaling_group_name": "splunk",
                            "cooldown": "300",
                            "estimated_instance_warmup": "0",
                            "id": "splunk-scaledown",
                            "metric_aggregation_type": "",
                            "min_adjustment_step": "0",
                            "name": "splunk-scaledown",
                            "policy_type": "SimpleScaling",
                            "scaling_adjustment": "-1",
                            "step_adjustment.#": "0"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": ""
                },
                "aws_autoscaling_policy.scale_up": {
                    "type": "aws_autoscaling_policy",
                    "depends_on": [
                        "aws_autoscaling_group.main"
                    ],
                    "primary": {
                        "id": "splunk-scaleup",
                        "attributes": {
                            "adjustment_type": "ChangeInCapacity",
                            "arn": "arn:aws:autoscaling:us-west-2:069884434102:scalingPolicy:c26b702f-879d-4c48-b88d-4b9a809b7bf1:autoScalingGroupName/splunk:policyName/splunk-scaleup",
                            "autoscaling_group_name": "splunk",
                            "cooldown": "300",
                            "estimated_instance_warmup": "0",
                            "id": "splunk-scaleup",
                            "metric_aggregation_type": "",
                            "min_adjustment_step": "0",
                            "name": "splunk-scaleup",
                            "policy_type": "SimpleScaling",
                            "scaling_adjustment": "1",
                            "step_adjustment.#": "0"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": ""
                },
                "aws_cloudwatch_metric_alarm.cpu_high": {
                    "type": "aws_cloudwatch_metric_alarm",
                    "depends_on": [
                        "aws_autoscaling_policy.scale_up",
                        "aws_ecs_cluster.main"
                    ],
                    "primary": {
                        "id": "splunk-cpureservation-high",
                        "attributes": {
                            "actions_enabled": "true",
                            "alarm_actions.#": "1",
                            "alarm_actions.3652893066": "arn:aws:autoscaling:us-west-2:069884434102:scalingPolicy:c26b702f-879d-4c48-b88d-4b9a809b7bf1:autoScalingGroupName/splunk:policyName/splunk-scaleup",
                            "alarm_description": "Scale up if the cpu reservation is above 90% for 10 minutes",
                            "alarm_name": "splunk-cpureservation-high",
                            "comparison_operator": "GreaterThanOrEqualToThreshold",
                            "dimensions.%": "1",
                            "dimensions.ClusterName": "splunk",
                            "evaluation_periods": "2",
                            "id": "splunk-cpureservation-high",
                            "insufficient_data_actions.#": "0",
                            "metric_name": "CPUReservation",
                            "namespace": "AWS/ECS",
                            "ok_actions.#": "0",
                            "period": "300",
                            "statistic": "Maximum",
                            "threshold": "90",
                            "unit": ""
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": ""
                },
                "aws_cloudwatch_metric_alarm.cpu_low": {
                    "type": "aws_cloudwatch_metric_alarm",
                    "depends_on": [
                        "aws_autoscaling_policy.scale_down",
                        "aws_cloudwatch_metric_alarm.memory_high",
                        "aws_ecs_cluster.main"
                    ],
                    "primary": {
                        "id": "splunk-cpureservation-low",
                        "attributes": {
                            "actions_enabled": "true",
                            "alarm_actions.#": "1",
                            "alarm_actions.2069689014": "arn:aws:autoscaling:us-west-2:069884434102:scalingPolicy:43a684b9-4583-4d41-acc4-84691177d51d:autoScalingGroupName/splunk:policyName/splunk-scaledown",
                            "alarm_description": "Scale down if the cpu reservation is below 10% for 10 minutes",
                            "alarm_name": "splunk-cpureservation-low",
                            "comparison_operator": "LessThanOrEqualToThreshold",
                            "dimensions.%": "1",
                            "dimensions.ClusterName": "splunk",
                            "evaluation_periods": "2",
                            "id": "splunk-cpureservation-low",
                            "insufficient_data_actions.#": "0",
                            "metric_name": "CPUReservation",
                            "namespace": "AWS/ECS",
                            "ok_actions.#": "0",
                            "period": "300",
                            "statistic": "Maximum",
                            "threshold": "10",
                            "unit": ""
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": ""
                },
                "aws_cloudwatch_metric_alarm.memory_high": {
                    "type": "aws_cloudwatch_metric_alarm",
                    "depends_on": [
                        "aws_autoscaling_policy.scale_up",
                        "aws_cloudwatch_metric_alarm.cpu_high",
                        "aws_ecs_cluster.main"
                    ],
                    "primary": {
                        "id": "splunk-memoryreservation-high",
                        "attributes": {
                            "actions_enabled": "true",
                            "alarm_actions.#": "1",
                            "alarm_actions.3652893066": "arn:aws:autoscaling:us-west-2:069884434102:scalingPolicy:c26b702f-879d-4c48-b88d-4b9a809b7bf1:autoScalingGroupName/splunk:policyName/splunk-scaleup",
                            "alarm_description": "Scale up if the memory reservation is above 90% for 10 minutes",
                            "alarm_name": "splunk-memoryreservation-high",
                            "comparison_operator": "GreaterThanOrEqualToThreshold",
                            "dimensions.%": "1",
                            "dimensions.ClusterName": "splunk",
                            "evaluation_periods": "2",
                            "id": "splunk-memoryreservation-high",
                            "insufficient_data_actions.#": "0",
                            "metric_name": "MemoryReservation",
                            "namespace": "AWS/ECS",
                            "ok_actions.#": "0",
                            "period": "300",
                            "statistic": "Maximum",
                            "threshold": "90",
                            "unit": ""
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": ""
                },
                "aws_cloudwatch_metric_alarm.memory_low": {
                    "type": "aws_cloudwatch_metric_alarm",
                    "depends_on": [
                        "aws_autoscaling_policy.scale_down",
                        "aws_cloudwatch_metric_alarm.cpu_low",
                        "aws_ecs_cluster.main"
                    ],
                    "primary": {
                        "id": "splunk-memoryreservation-low",
                        "attributes": {
                            "actions_enabled": "true",
                            "alarm_actions.#": "1",
                            "alarm_actions.2069689014": "arn:aws:autoscaling:us-west-2:069884434102:scalingPolicy:43a684b9-4583-4d41-acc4-84691177d51d:autoScalingGroupName/splunk:policyName/splunk-scaledown",
                            "alarm_description": "Scale down if the memory reservation is below 10% for 10 minutes",
                            "alarm_name": "splunk-memoryreservation-low",
                            "comparison_operator": "LessThanOrEqualToThreshold",
                            "dimensions.%": "1",
                            "dimensions.ClusterName": "splunk",
                            "evaluation_periods": "2",
                            "id": "splunk-memoryreservation-low",
                            "insufficient_data_actions.#": "0",
                            "metric_name": "MemoryReservation",
                            "namespace": "AWS/ECS",
                            "ok_actions.#": "0",
                            "period": "300",
                            "statistic": "Maximum",
                            "threshold": "10",
                            "unit": ""
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": ""
                },
                "aws_ecs_cluster.main": {
                    "type": "aws_ecs_cluster",
                    "depends_on": [],
                    "primary": {
                        "id": "arn:aws:ecs:us-west-2:069884434102:cluster/splunk",
                        "attributes": {
                            "id": "arn:aws:ecs:us-west-2:069884434102:cluster/splunk",
                            "name": "splunk"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": ""
                },
                "aws_launch_configuration.main": {
                    "type": "aws_launch_configuration",
                    "depends_on": [
                        "aws_security_group.cluster",
                        "data.template_cloudinit_config.cloud_config"
                    ],
                    "primary": {
                        "id": "splunk-20161212023411891148134vjt",
                        "attributes": {
                            "associate_public_ip_address": "false",
                            "ebs_block_device.#": "1",
                            "ebs_block_device.504524833.delete_on_termination": "true",
                            "ebs_block_device.504524833.device_name": "/dev/xvdcz",
                            "ebs_block_device.504524833.encrypted": "false",
                            "ebs_block_device.504524833.iops": "0",
                            "ebs_block_device.504524833.snapshot_id": "",
                            "ebs_block_device.504524833.volume_size": "25",
                            "ebs_block_device.504524833.volume_type": "gp2",
                            "ebs_optimized": "true",
                            "enable_monitoring": "true",
                            "ephemeral_block_device.#": "0",
                            "iam_instance_profile": "ecs-instance-profile-splunk-ac",
                            "id": "splunk-20161212023411891148134vjt",
                            "image_id": "ami-f3985d93",
                            "instance_type": "m4.large",
                            "key_name": "dev_key",
                            "name": "splunk-20161212023411891148134vjt",
                            "name_prefix": "splunk-",
                            "root_block_device.#": "1",
                            "root_block_device.0.delete_on_termination": "true",
                            "root_block_device.0.iops": "0",
                            "root_block_device.0.volume_size": "25",
                            "root_block_device.0.volume_type": "gp2",
                            "security_groups.#": "1",
                            "security_groups.1212145776": "sg-4e8c9937",
                            "spot_price": "",
                            "user_data": "7a258e2ae219843eb11650dd56f9679fbbd9db6a",
                            "vpc_classic_link_id": "",
                            "vpc_classic_link_security_groups.#": "0"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": ""
                },
                "aws_security_group.cluster": {
                    "type": "aws_security_group",
                    "depends_on": [],
                    "primary": {
                        "id": "sg-4e8c9937",
                        "attributes": {
                            "description": "Allows traffic from and to the EC2 instances of the splunk ECS cluster",
                            "egress.#": "1",
                            "egress.482069346.cidr_blocks.#": "1",
                            "egress.482069346.cidr_blocks.0": "0.0.0.0/0",
                            "egress.482069346.from_port": "0",
                            "egress.482069346.prefix_list_ids.#": "0",
                            "egress.482069346.protocol": "-1",
                            "egress.482069346.security_groups.#": "0",
                            "egress.482069346.self": "false",
                            "egress.482069346.to_port": "0",
                            "id": "sg-4e8c9937",
                            "ingress.#": "1",
                            "ingress.2580009958.cidr_blocks.#": "0",
                            "ingress.2580009958.from_port": "0",
                            "ingress.2580009958.protocol": "-1",
                            "ingress.2580009958.security_groups.#": "3",
                            "ingress.2580009958.security_groups.1602484707": "sg-538c992a",
                            "ingress.2580009958.security_groups.2480882663": "sg-568c992f",
                            "ingress.2580009958.security_groups.3668640154": "sg-518c9928",
                            "ingress.2580009958.self": "false",
                            "ingress.2580009958.to_port": "0",
                            "name": "splunk-ecs-cluster",
                            "owner_id": "069884434102",
                            "tags.%": "2",
                            "tags.Environment": "ac",
                            "tags.Name": "ECS cluster (splunk)",
                            "vpc_id": "vpc-28825e4f"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": ""
                },
                "data.template_cloudinit_config.cloud_config": {
                    "type": "template_cloudinit_config",
                    "depends_on": [
                        "data.template_file.ecs_cloud_config"
                    ],
                    "primary": {
                        "id": "1149516001",
                        "attributes": {
                            "base64_encode": "false",
                            "gzip": "false",
                            "id": "1149516001",
                            "part.#": "2",
                            "part.0.content": "#cloud-config\nbootcmd:\n  - echo 'SERVER_ENVIRONMENT=ac' \u003e\u003e /etc/environment\n  - echo 'SERVER_GROUP=splunk' \u003e\u003e /etc/environment\n  - echo 'SERVER_REGION=us-west-2' \u003e\u003e /etc/environment\n\n  - mkdir -p /etc/ecs\n  - echo 'ECS_ENGINE_AUTH_TYPE=' \u003e\u003e /etc/ecs/ecs.config\n  - echo 'ECS_ENGINE_AUTH_DATA=' \u003e\u003e /etc/ecs/ecs.config\n",
                            "part.0.content_type": "text/cloud-config",
                            "part.0.filename": "",
                            "part.0.merge_type": "",
                            "part.1.content": "",
                            "part.1.content_type": "text/cloud-config",
                            "part.1.filename": "",
                            "part.1.merge_type": "",
                            "rendered": "Content-Type: multipart/mixed; boundary=\"MIMEBOUNDARY\"\nMIME-Version: 1.0\r\n--MIMEBOUNDARY\r\nContent-Transfer-Encoding: 7bit\r\nContent-Type: text/cloud-config\r\nMime-Version: 1.0\r\n\r\n#cloud-config\nbootcmd:\n  - echo 'SERVER_ENVIRONMENT=ac' \u003e\u003e /etc/environment\n  - echo 'SERVER_GROUP=splunk' \u003e\u003e /etc/environment\n  - echo 'SERVER_REGION=us-west-2' \u003e\u003e /etc/environment\n\n  - mkdir -p /etc/ecs\n  - echo 'ECS_ENGINE_AUTH_TYPE=' \u003e\u003e /etc/ecs/ecs.config\n  - echo 'ECS_ENGINE_AUTH_DATA=' \u003e\u003e /etc/ecs/ecs.config\n\r\n--MIMEBOUNDARY\r\nContent-Transfer-Encoding: 7bit\r\nContent-Type: text/cloud-config\r\nMime-Version: 1.0\r\n\r\n\r\n--MIMEBOUNDARY--\r\n"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": ""
                },
                "data.template_file.ecs_cloud_config": {
                    "type": "template_file",
                    "depends_on": [],
                    "primary": {
                        "id": "ae1a5cdc543032985fc3b29374a2a261dab7fa5dcad4a5cf255d4df4043ea8d0",
                        "attributes": {
                            "id": "ae1a5cdc543032985fc3b29374a2a261dab7fa5dcad4a5cf255d4df4043ea8d0",
                            "rendered": "#cloud-config\nbootcmd:\n  - echo 'SERVER_ENVIRONMENT=ac' \u003e\u003e /etc/environment\n  - echo 'SERVER_GROUP=splunk' \u003e\u003e /etc/environment\n  - echo 'SERVER_REGION=us-west-2' \u003e\u003e /etc/environment\n\n  - mkdir -p /etc/ecs\n  - echo 'ECS_ENGINE_AUTH_TYPE=' \u003e\u003e /etc/ecs/ecs.config\n  - echo 'ECS_ENGINE_AUTH_DATA=' \u003e\u003e /etc/ecs/ecs.config\n",
                            "template": "#cloud-config\nbootcmd:\n  - echo 'SERVER_ENVIRONMENT=${environment}' \u003e\u003e /etc/environment\n  - echo 'SERVER_GROUP=${name}' \u003e\u003e /etc/environment\n  - echo 'SERVER_REGION=${region}' \u003e\u003e /etc/environment\n\n  - mkdir -p /etc/ecs\n  - echo 'ECS_ENGINE_AUTH_TYPE=${docker_auth_type}' \u003e\u003e /etc/ecs/ecs.config\n  - echo 'ECS_ENGINE_AUTH_DATA=${docker_auth_data}' \u003e\u003e /etc/ecs/ecs.config\n",
                            "vars.%": "5",
                            "vars.docker_auth_data": "",
                            "vars.docker_auth_type": "",
                            "vars.environment": "ac",
                            "vars.name": "splunk",
                            "vars.region": "us-west-2"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": ""
                }
            },
            "depends_on": []
        },
        {
            "path": [
                "root",
                "stack",
                "iam_role"
            ],
            "outputs": {
                "arn": {
                    "sensitive": false,
                    "type": "string",
                    "value": "arn:aws:iam::069884434102:role/ecs-role-splunk-ac"
                },
                "default_ecs_role_id": {
                    "sensitive": false,
                    "type": "string",
                    "value": "ecs-role-splunk-ac"
                },
                "profile": {
                    "sensitive": false,
                    "type": "string",
                    "value": "ecs-instance-profile-splunk-ac"
                }
            },
            "resources": {
                "aws_iam_instance_profile.default_ecs": {
                    "type": "aws_iam_instance_profile",
                    "depends_on": [
                        "aws_iam_role.default_ecs_role"
                    ],
                    "primary": {
                        "id": "ecs-instance-profile-splunk-ac",
                        "attributes": {
                            "arn": "arn:aws:iam::069884434102:instance-profile/ecs-instance-profile-splunk-ac",
                            "id": "ecs-instance-profile-splunk-ac",
                            "name": "ecs-instance-profile-splunk-ac",
                            "path": "/",
                            "roles.#": "1",
                            "roles.1923094755": "ecs-role-splunk-ac"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": ""
                },
                "aws_iam_role.default_ecs_role": {
                    "type": "aws_iam_role",
                    "depends_on": [],
                    "primary": {
                        "id": "ecs-role-splunk-ac",
                        "attributes": {
                            "arn": "arn:aws:iam::069884434102:role/ecs-role-splunk-ac",
                            "assume_role_policy": "{\n  \"Version\": \"2008-10-17\",\n  \"Statement\": [\n    {\n      \"Action\": \"sts:AssumeRole\",\n      \"Principal\": {\n        \"Service\": [\n          \"ecs.amazonaws.com\",\n          \"ec2.amazonaws.com\"\n        ]\n      },\n      \"Effect\": \"Allow\"\n    }\n  ]\n}\n",
                            "create_date": "2016-12-12T02:33:57Z",
                            "id": "ecs-role-splunk-ac",
                            "name": "ecs-role-splunk-ac",
                            "path": "/",
                            "unique_id": "AROAIUZGXM5JIWYYI3SAI"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": ""
                },
                "aws_iam_role_policy.default_ecs_instance_role_policy": {
                    "type": "aws_iam_role_policy",
                    "depends_on": [
                        "aws_iam_role.default_ecs_role"
                    ],
                    "primary": {
                        "id": "ecs-role-splunk-ac:ecs-instance-role-policy-splunk-ac",
                        "attributes": {
                            "id": "ecs-role-splunk-ac:ecs-instance-role-policy-splunk-ac",
                            "name": "ecs-instance-role-policy-splunk-ac",
                            "policy": "{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"ecs:CreateCluster\",\n        \"ecs:DeregisterContainerInstance\",\n        \"ecs:DiscoverPollEndpoint\",\n        \"ecs:Poll\",\n        \"ecs:RegisterContainerInstance\",\n        \"ecs:StartTelemetrySession\",\n        \"ecs:Submit*\",\n        \"ecr:GetAuthorizationToken\",\n        \"ecr:BatchCheckLayerAvailability\",\n        \"ecr:GetDownloadUrlForLayer\",\n        \"ecr:BatchGetImage\",\n        \"ecs:StartTask\",\n        \"autoscaling:*\"\n      ],\n      \"Resource\": \"*\"\n    },\n    {\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"logs:CreateLogGroup\",\n        \"logs:CreateLogStream\",\n        \"logs:PutLogEvents\",\n        \"logs:DescribeLogStreams\"\n      ],\n      \"Resource\": \"arn:aws:logs:*:*:*\"\n    }\n  ]\n}\n",
                            "role": "ecs-role-splunk-ac"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": ""
                },
                "aws_iam_role_policy.default_ecs_service_role_policy": {
                    "type": "aws_iam_role_policy",
                    "depends_on": [
                        "aws_iam_role.default_ecs_role"
                    ],
                    "primary": {
                        "id": "ecs-role-splunk-ac:ecs-service-role-policy-splunk-ac",
                        "attributes": {
                            "id": "ecs-role-splunk-ac:ecs-service-role-policy-splunk-ac",
                            "name": "ecs-service-role-policy-splunk-ac",
                            "policy": "{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"ec2:AuthorizeSecurityGroupIngress\",\n        \"ec2:Describe*\",\n        \"elasticloadbalancing:DeregisterInstancesFromLoadBalancer\",\n        \"elasticloadbalancing:Describe*\",\n        \"elasticloadbalancing:RegisterInstancesWithLoadBalancer\"\n      ],\n      \"Resource\": \"*\"\n    }\n  ]\n}\n",
                            "role": "ecs-role-splunk-ac"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": ""
                }
            },
            "depends_on": []
        },
        {
            "path": [
                "root",
                "stack",
                "s3_logs"
            ],
            "outputs": {
                "id": {
                    "sensitive": false,
                    "type": "string",
                    "value": "splunk-ac-logs"
                }
            },
            "resources": {
                "aws_s3_bucket.logs": {
                    "type": "aws_s3_bucket",
                    "depends_on": [
                        "data.template_file.policy"
                    ],
                    "primary": {
                        "id": "splunk-ac-logs",
                        "attributes": {
                            "acceleration_status": "",
                            "acl": "private",
                            "arn": "arn:aws:s3:::splunk-ac-logs",
                            "bucket": "splunk-ac-logs",
                            "force_destroy": "false",
                            "hosted_zone_id": "Z3BJ6K6RIION7M",
                            "id": "splunk-ac-logs",
                            "policy": "{\"Id\":\"log-bucket-policy\",\"Statement\":[{\"Action\":\"s3:PutObject\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"arn:aws:iam::797873946194:root\"},\"Resource\":\"arn:aws:s3:::splunk-ac-logs/*\",\"Sid\":\"log-bucket-policy\"}],\"Version\":\"2012-10-17\"}",
                            "region": "us-west-2",
                            "request_payer": "BucketOwner",
                            "tags.%": "2",
                            "tags.Environment": "ac",
                            "tags.Name": "splunk-ac-logs",
                            "website.#": "0"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": ""
                },
                "data.template_file.policy": {
                    "type": "template_file",
                    "depends_on": [],
                    "primary": {
                        "id": "fa6bfdb4811c57bf14bd8b40dc87193b25a514ad3200c3676bd69838fa85fc9f",
                        "attributes": {
                            "id": "fa6bfdb4811c57bf14bd8b40dc87193b25a514ad3200c3676bd69838fa85fc9f",
                            "rendered": "{\n  \"Id\": \"log-bucket-policy\",\n  \"Statement\": [\n    {\n      \"Action\": \"s3:PutObject\",\n      \"Effect\": \"Allow\",\n      \"Principal\": {\n        \"AWS\": \"arn:aws:iam::797873946194:root\"\n      },\n      \"Resource\": \"arn:aws:s3:::splunk-ac-logs/*\",\n      \"Sid\": \"log-bucket-policy\"\n    }\n  ],\n  \"Version\": \"2012-10-17\"\n}\n",
                            "template": "{\n  \"Id\": \"log-bucket-policy\",\n  \"Statement\": [\n    {\n      \"Action\": \"s3:PutObject\",\n      \"Effect\": \"Allow\",\n      \"Principal\": {\n        \"AWS\": \"arn:aws:iam::${account_id}:root\"\n      },\n      \"Resource\": \"arn:aws:s3:::${bucket}/*\",\n      \"Sid\": \"log-bucket-policy\"\n    }\n  ],\n  \"Version\": \"2012-10-17\"\n}\n",
                            "vars.%": "2",
                            "vars.account_id": "797873946194",
                            "vars.bucket": "splunk-ac-logs"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": ""
                }
            },
            "depends_on": []
        },
        {
            "path": [
                "root",
                "stack",
                "security_groups"
            ],
            "outputs": {
                "external_elb": {
                    "sensitive": false,
                    "type": "string",
                    "value": "sg-538c992a"
                },
                "external_ssh": {
                    "sensitive": false,
                    "type": "string",
                    "value": "sg-508c9929"
                },
                "internal_elb": {
                    "sensitive": false,
                    "type": "string",
                    "value": "sg-518c9928"
                },
                "internal_ssh": {
                    "sensitive": false,
                    "type": "string",
                    "value": "sg-568c992f"
                }
            },
            "resources": {
                "aws_security_group.external_elb": {
                    "type": "aws_security_group",
                    "depends_on": [],
                    "primary": {
                        "id": "sg-538c992a",
                        "attributes": {
                            "description": "Allows external ELB traffic",
                            "egress.#": "1",
                            "egress.482069346.cidr_blocks.#": "1",
                            "egress.482069346.cidr_blocks.0": "0.0.0.0/0",
                            "egress.482069346.from_port": "0",
                            "egress.482069346.prefix_list_ids.#": "0",
                            "egress.482069346.protocol": "-1",
                            "egress.482069346.security_groups.#": "0",
                            "egress.482069346.self": "false",
                            "egress.482069346.to_port": "0",
                            "id": "sg-538c992a",
                            "ingress.#": "2",
                            "ingress.2214680975.cidr_blocks.#": "1",
                            "ingress.2214680975.cidr_blocks.0": "0.0.0.0/0",
                            "ingress.2214680975.from_port": "80",
                            "ingress.2214680975.protocol": "tcp",
                            "ingress.2214680975.security_groups.#": "0",
                            "ingress.2214680975.self": "false",
                            "ingress.2214680975.to_port": "80",
                            "ingress.2617001939.cidr_blocks.#": "1",
                            "ingress.2617001939.cidr_blocks.0": "0.0.0.0/0",
                            "ingress.2617001939.from_port": "443",
                            "ingress.2617001939.protocol": "tcp",
                            "ingress.2617001939.security_groups.#": "0",
                            "ingress.2617001939.self": "false",
                            "ingress.2617001939.to_port": "443",
                            "name": "splunk-ac-external-elb",
                            "owner_id": "069884434102",
                            "tags.%": "2",
                            "tags.Environment": "ac",
                            "tags.Name": "splunk external elb",
                            "vpc_id": "vpc-28825e4f"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": ""
                },
                "aws_security_group.external_ssh": {
                    "type": "aws_security_group",
                    "depends_on": [],
                    "primary": {
                        "id": "sg-508c9929",
                        "attributes": {
                            "description": "Allows ssh from the world",
                            "egress.#": "1",
                            "egress.482069346.cidr_blocks.#": "1",
                            "egress.482069346.cidr_blocks.0": "0.0.0.0/0",
                            "egress.482069346.from_port": "0",
                            "egress.482069346.prefix_list_ids.#": "0",
                            "egress.482069346.protocol": "-1",
                            "egress.482069346.security_groups.#": "0",
                            "egress.482069346.self": "false",
                            "egress.482069346.to_port": "0",
                            "id": "sg-508c9929",
                            "ingress.#": "1",
                            "ingress.2541437006.cidr_blocks.#": "1",
                            "ingress.2541437006.cidr_blocks.0": "0.0.0.0/0",
                            "ingress.2541437006.from_port": "22",
                            "ingress.2541437006.protocol": "tcp",
                            "ingress.2541437006.security_groups.#": "0",
                            "ingress.2541437006.self": "false",
                            "ingress.2541437006.to_port": "22",
                            "name": "splunk-ac-external-ssh",
                            "owner_id": "069884434102",
                            "tags.%": "2",
                            "tags.Environment": "ac",
                            "tags.Name": "splunk external ssh",
                            "vpc_id": "vpc-28825e4f"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": ""
                },
                "aws_security_group.internal_elb": {
                    "type": "aws_security_group",
                    "depends_on": [],
                    "primary": {
                        "id": "sg-518c9928",
                        "attributes": {
                            "description": "Allows internal ELB traffic",
                            "egress.#": "1",
                            "egress.482069346.cidr_blocks.#": "1",
                            "egress.482069346.cidr_blocks.0": "0.0.0.0/0",
                            "egress.482069346.from_port": "0",
                            "egress.482069346.prefix_list_ids.#": "0",
                            "egress.482069346.protocol": "-1",
                            "egress.482069346.security_groups.#": "0",
                            "egress.482069346.self": "false",
                            "egress.482069346.to_port": "0",
                            "id": "sg-518c9928",
                            "ingress.#": "1",
                            "ingress.2533755099.cidr_blocks.#": "1",
                            "ingress.2533755099.cidr_blocks.0": "10.30.0.0/16",
                            "ingress.2533755099.from_port": "80",
                            "ingress.2533755099.protocol": "tcp",
                            "ingress.2533755099.security_groups.#": "0",
                            "ingress.2533755099.self": "false",
                            "ingress.2533755099.to_port": "80",
                            "name": "splunk-ac-internal-elb",
                            "owner_id": "069884434102",
                            "tags.%": "2",
                            "tags.Environment": "ac",
                            "tags.Name": "splunk internal elb",
                            "vpc_id": "vpc-28825e4f"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": ""
                },
                "aws_security_group.internal_ssh": {
                    "type": "aws_security_group",
                    "depends_on": [
                        "aws_security_group.external_ssh"
                    ],
                    "primary": {
                        "id": "sg-568c992f",
                        "attributes": {
                            "description": "Allows ssh from bastion",
                            "egress.#": "1",
                            "egress.2715606840.cidr_blocks.#": "1",
                            "egress.2715606840.cidr_blocks.0": "10.30.0.0/16",
                            "egress.2715606840.from_port": "0",
                            "egress.2715606840.prefix_list_ids.#": "0",
                            "egress.2715606840.protocol": "tcp",
                            "egress.2715606840.security_groups.#": "0",
                            "egress.2715606840.self": "false",
                            "egress.2715606840.to_port": "0",
                            "id": "sg-568c992f",
                            "ingress.#": "1",
                            "ingress.257948038.cidr_blocks.#": "0",
                            "ingress.257948038.from_port": "22",
                            "ingress.257948038.protocol": "tcp",
                            "ingress.257948038.security_groups.#": "1",
                            "ingress.257948038.security_groups.198916792": "sg-508c9929",
                            "ingress.257948038.self": "false",
                            "ingress.257948038.to_port": "22",
                            "name": "splunk-ac-internal-ssh",
                            "owner_id": "069884434102",
                            "tags.%": "2",
                            "tags.Environment": "ac",
                            "tags.Name": "splunk internal ssh",
                            "vpc_id": "vpc-28825e4f"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": ""
                }
            },
            "depends_on": []
        },
        {
            "path": [
                "root",
                "stack",
                "vpc"
            ],
            "outputs": {
                "availability_zones": {
                    "sensitive": false,
                    "type": "list",
                    "value": [
                        "us-west-2a",
                        "us-west-2b",
                        "us-west-2c"
                    ]
                },
                "external_rtb_id": {
                    "sensitive": false,
                    "type": "string",
                    "value": "rtb-0a274a6d"
                },
                "external_subnets": {
                    "sensitive": false,
                    "type": "list",
                    "value": [
                        "subnet-adc4d2db",
                        "subnet-495da12e",
                        "subnet-0a703752"
                    ]
                },
                "id": {
                    "sensitive": false,
                    "type": "string",
                    "value": "vpc-28825e4f"
                },
                "internal_nat_ips": {
                    "sensitive": false,
                    "type": "list",
                    "value": [
                        "35.161.218.176",
                        "35.162.87.40",
                        "35.165.230.216"
                    ]
                },
                "internal_rtb_id": {
                    "sensitive": false,
                    "type": "string",
                    "value": "rtb-17274a70,rtb-08274a6f,rtb-09274a6e"
                },
                "internal_subnets": {
                    "sensitive": false,
                    "type": "list",
                    "value": [
                        "subnet-acc4d2da",
                        "subnet-575da130",
                        "subnet-0d703755"
                    ]
                },
                "security_group": {
                    "sensitive": false,
                    "type": "string",
                    "value": "sg-668c991f"
                }
            },
            "resources": {
                "aws_eip.nat.0": {
                    "type": "aws_eip",
                    "depends_on": [],
                    "primary": {
                        "id": "eipalloc-74145913",
                        "attributes": {
                            "association_id": "eipassoc-20327e5b",
                            "domain": "vpc",
                            "id": "eipalloc-74145913",
                            "instance": "",
                            "network_interface": "eni-eca88bac",
                            "private_ip": "10.30.41.236",
                            "public_ip": "35.161.218.176",
                            "vpc": "true"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": ""
                },
                "aws_eip.nat.1": {
                    "type": "aws_eip",
                    "depends_on": [],
                    "primary": {
                        "id": "eipalloc-6f115c08",
                        "attributes": {
                            "association_id": "eipassoc-cc4d01b7",
                            "domain": "vpc",
                            "id": "eipalloc-6f115c08",
                            "instance": "",
                            "network_interface": "eni-bd78c8cc",
                            "private_ip": "10.30.105.227",
                            "public_ip": "35.162.87.40",
                            "vpc": "true"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": ""
                },
                "aws_eip.nat.2": {
                    "type": "aws_eip",
                    "depends_on": [],
                    "primary": {
                        "id": "eipalloc-42175a25",
                        "attributes": {
                            "association_id": "eipassoc-f7337f8c",
                            "domain": "vpc",
                            "id": "eipalloc-42175a25",
                            "instance": "",
                            "network_interface": "eni-58cf6908",
                            "private_ip": "10.30.168.157",
                            "public_ip": "35.165.230.216",
                            "vpc": "true"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": ""
                },
                "aws_internet_gateway.main": {
                    "type": "aws_internet_gateway",
                    "depends_on": [
                        "aws_vpc.main"
                    ],
                    "primary": {
                        "id": "igw-682e400c",
                        "attributes": {
                            "id": "igw-682e400c",
                            "tags.%": "2",
                            "tags.Environment": "ac",
                            "tags.Name": "splunk",
                            "vpc_id": "vpc-28825e4f"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": ""
                },
                "aws_nat_gateway.main.0": {
                    "type": "aws_nat_gateway",
                    "depends_on": [
                        "aws_eip.nat",
                        "aws_internet_gateway.main",
                        "aws_subnet.external"
                    ],
                    "primary": {
                        "id": "nat-0931502393487d51a",
                        "attributes": {
                            "allocation_id": "eipalloc-74145913",
                            "id": "nat-0931502393487d51a",
                            "network_interface_id": "eni-eca88bac",
                            "private_ip": "10.30.41.236",
                            "public_ip": "35.161.218.176",
                            "subnet_id": "subnet-adc4d2db"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": ""
                },
                "aws_nat_gateway.main.1": {
                    "type": "aws_nat_gateway",
                    "depends_on": [
                        "aws_eip.nat",
                        "aws_internet_gateway.main",
                        "aws_subnet.external"
                    ],
                    "primary": {
                        "id": "nat-08558859f6e961dac",
                        "attributes": {
                            "allocation_id": "eipalloc-6f115c08",
                            "id": "nat-08558859f6e961dac",
                            "network_interface_id": "eni-bd78c8cc",
                            "private_ip": "10.30.105.227",
                            "public_ip": "35.162.87.40",
                            "subnet_id": "subnet-495da12e"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": ""
                },
                "aws_nat_gateway.main.2": {
                    "type": "aws_nat_gateway",
                    "depends_on": [
                        "aws_eip.nat",
                        "aws_internet_gateway.main",
                        "aws_subnet.external"
                    ],
                    "primary": {
                        "id": "nat-09178c29934520100",
                        "attributes": {
                            "allocation_id": "eipalloc-42175a25",
                            "id": "nat-09178c29934520100",
                            "network_interface_id": "eni-58cf6908",
                            "private_ip": "10.30.168.157",
                            "public_ip": "35.165.230.216",
                            "subnet_id": "subnet-0a703752"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": ""
                },
                "aws_route.external": {
                    "type": "aws_route",
                    "depends_on": [
                        "aws_internet_gateway.main",
                        "aws_route_table.external"
                    ],
                    "primary": {
                        "id": "r-rtb-0a274a6d1080289494",
                        "attributes": {
                            "destination_cidr_block": "0.0.0.0/0",
                            "destination_prefix_list_id": "",
                            "gateway_id": "igw-682e400c",
                            "id": "r-rtb-0a274a6d1080289494",
                            "instance_id": "",
                            "instance_owner_id": "",
                            "nat_gateway_id": "",
                            "network_interface_id": "",
                            "origin": "CreateRoute",
                            "route_table_id": "rtb-0a274a6d",
                            "state": "active",
                            "vpc_peering_connection_id": ""
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": ""
                },
                "aws_route.internal.0": {
                    "type": "aws_route",
                    "depends_on": [
                        "aws_nat_gateway.main",
                        "aws_route_table.internal"
                    ],
                    "primary": {
                        "id": "r-rtb-17274a701080289494",
                        "attributes": {
                            "destination_cidr_block": "0.0.0.0/0",
                            "destination_prefix_list_id": "",
                            "gateway_id": "",
                            "id": "r-rtb-17274a701080289494",
                            "instance_id": "",
                            "instance_owner_id": "",
                            "nat_gateway_id": "nat-0931502393487d51a",
                            "network_interface_id": "",
                            "origin": "CreateRoute",
                            "route_table_id": "rtb-17274a70",
                            "state": "active",
                            "vpc_peering_connection_id": ""
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": ""
                },
                "aws_route.internal.1": {
                    "type": "aws_route",
                    "depends_on": [
                        "aws_nat_gateway.main",
                        "aws_route_table.internal"
                    ],
                    "primary": {
                        "id": "r-rtb-08274a6f1080289494",
                        "attributes": {
                            "destination_cidr_block": "0.0.0.0/0",
                            "destination_prefix_list_id": "",
                            "gateway_id": "",
                            "id": "r-rtb-08274a6f1080289494",
                            "instance_id": "",
                            "instance_owner_id": "",
                            "nat_gateway_id": "nat-08558859f6e961dac",
                            "network_interface_id": "",
                            "origin": "CreateRoute",
                            "route_table_id": "rtb-08274a6f",
                            "state": "active",
                            "vpc_peering_connection_id": ""
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": ""
                },
                "aws_route.internal.2": {
                    "type": "aws_route",
                    "depends_on": [
                        "aws_nat_gateway.main",
                        "aws_route_table.internal"
                    ],
                    "primary": {
                        "id": "r-rtb-09274a6e1080289494",
                        "attributes": {
                            "destination_cidr_block": "0.0.0.0/0",
                            "destination_prefix_list_id": "",
                            "gateway_id": "",
                            "id": "r-rtb-09274a6e1080289494",
                            "instance_id": "",
                            "instance_owner_id": "",
                            "nat_gateway_id": "nat-09178c29934520100",
                            "network_interface_id": "",
                            "origin": "CreateRoute",
                            "route_table_id": "rtb-09274a6e",
                            "state": "active",
                            "vpc_peering_connection_id": ""
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": ""
                },
                "aws_route_table.external": {
                    "type": "aws_route_table",
                    "depends_on": [
                        "aws_vpc.main"
                    ],
                    "primary": {
                        "id": "rtb-0a274a6d",
                        "attributes": {
                            "id": "rtb-0a274a6d",
                            "propagating_vgws.#": "0",
                            "route.#": "1",
                            "route.635911701.cidr_block": "0.0.0.0/0",
                            "route.635911701.gateway_id": "igw-682e400c",
                            "route.635911701.instance_id": "",
                            "route.635911701.nat_gateway_id": "",
                            "route.635911701.network_interface_id": "",
                            "route.635911701.vpc_peering_connection_id": "",
                            "tags.%": "1",
                            "tags.Name": "splunk-external-001",
                            "vpc_id": "vpc-28825e4f"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": ""
                },
                "aws_route_table.internal.0": {
                    "type": "aws_route_table",
                    "depends_on": [
                        "aws_vpc.main"
                    ],
                    "primary": {
                        "id": "rtb-17274a70",
                        "attributes": {
                            "id": "rtb-17274a70",
                            "propagating_vgws.#": "0",
                            "route.#": "1",
                            "route.2071786794.cidr_block": "0.0.0.0/0",
                            "route.2071786794.gateway_id": "",
                            "route.2071786794.instance_id": "",
                            "route.2071786794.nat_gateway_id": "nat-0931502393487d51a",
                            "route.2071786794.network_interface_id": "",
                            "route.2071786794.vpc_peering_connection_id": "",
                            "tags.%": "1",
                            "tags.Name": "splunk-internal-001",
                            "vpc_id": "vpc-28825e4f"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": ""
                },
                "aws_route_table.internal.1": {
                    "type": "aws_route_table",
                    "depends_on": [
                        "aws_vpc.main"
                    ],
                    "primary": {
                        "id": "rtb-08274a6f",
                        "attributes": {
                            "id": "rtb-08274a6f",
                            "propagating_vgws.#": "0",
                            "route.#": "1",
                            "route.3726714518.cidr_block": "0.0.0.0/0",
                            "route.3726714518.gateway_id": "",
                            "route.3726714518.instance_id": "",
                            "route.3726714518.nat_gateway_id": "nat-08558859f6e961dac",
                            "route.3726714518.network_interface_id": "",
                            "route.3726714518.vpc_peering_connection_id": "",
                            "tags.%": "1",
                            "tags.Name": "splunk-internal-002",
                            "vpc_id": "vpc-28825e4f"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": ""
                },
                "aws_route_table.internal.2": {
                    "type": "aws_route_table",
                    "depends_on": [
                        "aws_vpc.main"
                    ],
                    "primary": {
                        "id": "rtb-09274a6e",
                        "attributes": {
                            "id": "rtb-09274a6e",
                            "propagating_vgws.#": "0",
                            "route.#": "1",
                            "route.3457721443.cidr_block": "0.0.0.0/0",
                            "route.3457721443.gateway_id": "",
                            "route.3457721443.instance_id": "",
                            "route.3457721443.nat_gateway_id": "nat-09178c29934520100",
                            "route.3457721443.network_interface_id": "",
                            "route.3457721443.vpc_peering_connection_id": "",
                            "tags.%": "1",
                            "tags.Name": "splunk-internal-003",
                            "vpc_id": "vpc-28825e4f"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": ""
                },
                "aws_route_table_association.external.0": {
                    "type": "aws_route_table_association",
                    "depends_on": [
                        "aws_route_table.external",
                        "aws_subnet.external"
                    ],
                    "primary": {
                        "id": "rtbassoc-bd4deedb",
                        "attributes": {
                            "id": "rtbassoc-bd4deedb",
                            "route_table_id": "rtb-0a274a6d",
                            "subnet_id": "subnet-adc4d2db"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": ""
                },
                "aws_route_table_association.external.1": {
                    "type": "aws_route_table_association",
                    "depends_on": [
                        "aws_route_table.external",
                        "aws_subnet.external"
                    ],
                    "primary": {
                        "id": "rtbassoc-ba4deedc",
                        "attributes": {
                            "id": "rtbassoc-ba4deedc",
                            "route_table_id": "rtb-0a274a6d",
                            "subnet_id": "subnet-495da12e"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": ""
                },
                "aws_route_table_association.external.2": {
                    "type": "aws_route_table_association",
                    "depends_on": [
                        "aws_route_table.external",
                        "aws_subnet.external"
                    ],
                    "primary": {
                        "id": "rtbassoc-bc4deeda",
                        "attributes": {
                            "id": "rtbassoc-bc4deeda",
                            "route_table_id": "rtb-0a274a6d",
                            "subnet_id": "subnet-0a703752"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": ""
                },
                "aws_route_table_association.internal.0": {
                    "type": "aws_route_table_association",
                    "depends_on": [
                        "aws_route_table.internal",
                        "aws_subnet.internal"
                    ],
                    "primary": {
                        "id": "rtbassoc-bb4deedd",
                        "attributes": {
                            "id": "rtbassoc-bb4deedd",
                            "route_table_id": "rtb-17274a70",
                            "subnet_id": "subnet-acc4d2da"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": ""
                },
                "aws_route_table_association.internal.1": {
                    "type": "aws_route_table_association",
                    "depends_on": [
                        "aws_route_table.internal",
                        "aws_subnet.internal"
                    ],
                    "primary": {
                        "id": "rtbassoc-b84deede",
                        "attributes": {
                            "id": "rtbassoc-b84deede",
                            "route_table_id": "rtb-08274a6f",
                            "subnet_id": "subnet-575da130"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": ""
                },
                "aws_route_table_association.internal.2": {
                    "type": "aws_route_table_association",
                    "depends_on": [
                        "aws_route_table.internal",
                        "aws_subnet.internal"
                    ],
                    "primary": {
                        "id": "rtbassoc-b94deedf",
                        "attributes": {
                            "id": "rtbassoc-b94deedf",
                            "route_table_id": "rtb-09274a6e",
                            "subnet_id": "subnet-0d703755"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": ""
                },
                "aws_subnet.external.0": {
                    "type": "aws_subnet",
                    "depends_on": [
                        "aws_vpc.main"
                    ],
                    "primary": {
                        "id": "subnet-adc4d2db",
                        "attributes": {
                            "availability_zone": "us-west-2a",
                            "cidr_block": "10.30.32.0/20",
                            "id": "subnet-adc4d2db",
                            "map_public_ip_on_launch": "true",
                            "tags.%": "1",
                            "tags.Name": "splunk-external-001",
                            "vpc_id": "vpc-28825e4f"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": ""
                },
                "aws_subnet.external.1": {
                    "type": "aws_subnet",
                    "depends_on": [
                        "aws_vpc.main"
                    ],
                    "primary": {
                        "id": "subnet-495da12e",
                        "attributes": {
                            "availability_zone": "us-west-2b",
                            "cidr_block": "10.30.96.0/20",
                            "id": "subnet-495da12e",
                            "map_public_ip_on_launch": "true",
                            "tags.%": "1",
                            "tags.Name": "splunk-external-002",
                            "vpc_id": "vpc-28825e4f"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": ""
                },
                "aws_subnet.external.2": {
                    "type": "aws_subnet",
                    "depends_on": [
                        "aws_vpc.main"
                    ],
                    "primary": {
                        "id": "subnet-0a703752",
                        "attributes": {
                            "availability_zone": "us-west-2c",
                            "cidr_block": "10.30.160.0/20",
                            "id": "subnet-0a703752",
                            "map_public_ip_on_launch": "true",
                            "tags.%": "1",
                            "tags.Name": "splunk-external-003",
                            "vpc_id": "vpc-28825e4f"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": ""
                },
                "aws_subnet.internal.0": {
                    "type": "aws_subnet",
                    "depends_on": [
                        "aws_vpc.main"
                    ],
                    "primary": {
                        "id": "subnet-acc4d2da",
                        "attributes": {
                            "availability_zone": "us-west-2a",
                            "cidr_block": "10.30.0.0/19",
                            "id": "subnet-acc4d2da",
                            "map_public_ip_on_launch": "false",
                            "tags.%": "1",
                            "tags.Name": "splunk-internal-001",
                            "vpc_id": "vpc-28825e4f"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": ""
                },
                "aws_subnet.internal.1": {
                    "type": "aws_subnet",
                    "depends_on": [
                        "aws_vpc.main"
                    ],
                    "primary": {
                        "id": "subnet-575da130",
                        "attributes": {
                            "availability_zone": "us-west-2b",
                            "cidr_block": "10.30.64.0/19",
                            "id": "subnet-575da130",
                            "map_public_ip_on_launch": "false",
                            "tags.%": "1",
                            "tags.Name": "splunk-internal-002",
                            "vpc_id": "vpc-28825e4f"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": ""
                },
                "aws_subnet.internal.2": {
                    "type": "aws_subnet",
                    "depends_on": [
                        "aws_vpc.main"
                    ],
                    "primary": {
                        "id": "subnet-0d703755",
                        "attributes": {
                            "availability_zone": "us-west-2c",
                            "cidr_block": "10.30.128.0/19",
                            "id": "subnet-0d703755",
                            "map_public_ip_on_launch": "false",
                            "tags.%": "1",
                            "tags.Name": "splunk-internal-003",
                            "vpc_id": "vpc-28825e4f"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": ""
                },
                "aws_vpc.main": {
                    "type": "aws_vpc",
                    "depends_on": [],
                    "primary": {
                        "id": "vpc-28825e4f",
                        "attributes": {
                            "cidr_block": "10.30.0.0/16",
                            "default_network_acl_id": "acl-908205f7",
                            "default_route_table_id": "rtb-0e274a69",
                            "default_security_group_id": "sg-668c991f",
                            "dhcp_options_id": "dopt-e60b2d82",
                            "enable_classiclink": "false",
                            "enable_dns_hostnames": "true",
                            "enable_dns_support": "true",
                            "id": "vpc-28825e4f",
                            "instance_tenancy": "default",
                            "main_route_table_id": "rtb-0e274a69",
                            "tags.%": "2",
                            "tags.Environment": "ac",
                            "tags.Name": "splunk"
                        },
                        "meta": {},
                        "tainted": false
                    },
                    "deposed": [],
                    "provider": ""
                }
            },
            "depends_on": []
        },
        {
            "path": [
                "root",
                "stack",
                "bastion",
                "ami"
            ],
            "outputs": {
                "ami_id": {
                    "sensitive": false,
                    "type": "string",
                    "value": "ami-6418c304"
                }
            },
            "resources": {},
            "depends_on": []
        },
        {
            "path": [
                "root",
                "stack",
                "bastion",
                "ami",
                "ami"
            ],
            "outputs": {
                "ami_id": {
                    "sensitive": false,
                    "type": "string",
                    "value": "ami-6418c304"
                }
            },
            "resources": {},
            "depends_on": []
        },
        {
            "path": [
                "root",
                "stack",
                "bastion",
                "ami",
                "virttype"
            ],
            "outputs": {
                "prefer_hvm": {
                    "sensitive": false,
                    "type": "string",
                    "value": "hvm"
                },
                "prefer_pv": {
                    "sensitive": false,
                    "type": "string",
                    "value": "hvm"
                }
            },
            "resources": {},
            "depends_on": []
        }
    ]
}
